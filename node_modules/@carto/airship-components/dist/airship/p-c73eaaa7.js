import{i as n,d as t,f as r,g as i,n as u,h as e,m as o,j as f,k as a,o as s,p as c,q as h}from"./p-3374c455.js";var l={value:function(){}};function v(){for(var n,t=0,r=arguments.length,i={};t<r;++t){if(!(n=arguments[t]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new w(i)}function w(n){this._=n}function y(n,t){return n.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}function p(n,t){for(var r,i=0,u=n.length;i<u;++i)if((r=n[i]).name===t)return r.value}function d(n,t,r){for(var i=0,u=n.length;i<u;++i)if(n[i].name===t){n[i]=l,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=r&&n.push({name:t,value:r}),n}w.prototype=v.prototype={constructor:w,on:function(n,t){var r,i=this._,u=y(n+"",i),e=-1,o=u.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++e<o;)if(r=(n=u[e]).type)i[r]=d(i[r],n.name,t);else if(null==t)for(r in i)i[r]=d(i[r],n.name,null);return this}for(;++e<o;)if((r=(n=u[e]).type)&&(r=p(i[r],n.name)))return r},copy:function(){var n={},t=this._;for(var r in t)n[r]=t[r].slice();return new w(n)},call:function(n,t){if((r=arguments.length-2)>0)for(var r,i,u=new Array(r),e=0;e<r;++e)u[e]=arguments[e+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(e=0,r=(i=this._[n]).length;e<r;++e)i[e].value.apply(t,u)},apply:function(n,t,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],u=0,e=i.length;u<e;++u)i[u].value.apply(t,r)}};var m,E,k=0,b=0,A=0,T=1e3,x=0,g=0,j=0,_="object"==typeof performance&&performance.now?performance:Date,I="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function q(){return g||(I(z),g=_.now()+j)}function z(){g=0}function D(){this._call=this._time=this._next=null}function M(n,t,r){var i=new D;return i.restart(n,t,r),i}function B(){g=(x=_.now())+j,k=b=0;try{!function(){q(),++k;for(var n,t=m;t;)(n=g-t._time)>=0&&t._call.call(null,n),t=t._next;--k}()}finally{k=0,function(){for(var n,t,r=m,i=1/0;r;)r._call?(i>r._time&&(i=r._time),n=r,r=r._next):(t=r._next,r._next=null,r=n?n._next=t:m=t);E=n,F(i)}(),g=0}}function C(){var n=_.now(),t=n-x;t>T&&(j-=t,x=n)}function F(n){k||(b&&(b=clearTimeout(b)),n-g>24?(n<1/0&&(b=setTimeout(B,n-_.now()-j)),A&&(A=clearInterval(A))):(A||(x=_.now(),A=setInterval(C,T)),k=1,I(B)))}function G(n,t,r){var i=new D;return i.restart(function(r){i.stop(),n(r+t)},t=null==t?0:+t,r),i}D.prototype=M.prototype={constructor:D,restart:function(n,t,r){if("function"!=typeof n)throw new TypeError("callback is not a function");r=(null==r?q():+r)+(null==t?0:+t),this._next||E===this||(E?E._next=this:m=this,E=this),this._call=n,this._time=r,F()},stop:function(){this._call&&(this._call=null,this._time=1/0,F())}};var H=v("start","end","interrupt"),J=[],K=0,L=1,N=2,O=3,P=4,Q=5,R=6;function S(n,t,r,i,u,e){var o=n.__transition;if(o){if(r in o)return}else n.__transition={};!function(n,t,r){var i,u=n.__transition;function e(a){var s,c,h,l;if(r.state!==L)return f();for(s in u)if((l=u[s]).name===r.name){if(l.state===O)return G(e);l.state===P?(l.state=R,l.timer.stop(),l.on.call("interrupt",n,n.__data__,l.index,l.group),delete u[s]):+s<t&&(l.state=R,l.timer.stop(),delete u[s])}if(G(function(){r.state===O&&(r.state=P,r.timer.restart(o,r.delay,r.time),o(a))}),r.state=N,r.on.call("start",n,n.__data__,r.index,r.group),r.state===N){for(r.state=O,i=new Array(h=r.tween.length),s=0,c=-1;s<h;++s)(l=r.tween[s].value.call(n,n.__data__,r.index,r.group))&&(i[++c]=l);i.length=c+1}}function o(t){for(var u=t<r.duration?r.ease.call(null,t/r.duration):(r.timer.restart(f),r.state=Q,1),e=-1,o=i.length;++e<o;)i[e].call(null,u);r.state===Q&&(r.on.call("end",n,n.__data__,r.index,r.group),f())}function f(){for(var i in r.state=R,r.timer.stop(),delete u[t],u)return;delete n.__transition}u[t]=r,r.timer=M(function(n){r.state=L,r.timer.restart(e,r.delay,r.time),r.delay<=n&&e(n-r.delay)},0,r.time)}(n,r,{name:t,index:i,group:u,on:H,tween:J,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:K})}function U(n,t){var r=W(n,t);if(r.state>K)throw new Error("too late; already scheduled");return r}function V(n,t){var r=W(n,t);if(r.state>N)throw new Error("too late; already started");return r}function W(n,t){var r=n.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function X(n,t){var r,i,u,e=n.__transition,o=!0;if(e){for(u in t=null==t?null:t+"",e)(r=e[u]).name===t?(i=r.state>N&&r.state<Q,r.state=R,r.timer.stop(),i&&r.on.call("interrupt",n,n.__data__,r.index,r.group),delete e[u]):o=!1;o&&delete n.__transition}}function Y(n,t,r){var i=n._id;return n.each(function(){var n=V(this,i);(n.value||(n.value={}))[t]=r.apply(this,arguments)}),function(n){return W(n,i).value[t]}}function Z(u,e){var o;return("number"==typeof e?n:e instanceof t?r:(o=t(e))?(e=o,r):i)(u,e)}var $=s.prototype.constructor,nn=0;function tn(n,t,r,i){this._groups=n,this._parents=t,this._name=r,this._id=i}function rn(){return++nn}var un=s.prototype;tn.prototype=function(n){return s().transition(n)}.prototype={constructor:tn,select:function(n){var t=this._name,r=this._id;"function"!=typeof n&&(n=f(n));for(var i=this._groups,u=i.length,e=new Array(u),o=0;o<u;++o)for(var a,s,c=i[o],h=c.length,l=e[o]=new Array(h),v=0;v<h;++v)(a=c[v])&&(s=n.call(a,a.__data__,v,c))&&("__data__"in a&&(s.__data__=a.__data__),l[v]=s,S(l[v],t,r,v,l,W(a,r)));return new tn(e,this._parents,t,r)},selectAll:function(n){var t=this._name,r=this._id;"function"!=typeof n&&(n=a(n));for(var i=this._groups,u=i.length,e=[],o=[],f=0;f<u;++f)for(var s,c=i[f],h=c.length,l=0;l<h;++l)if(s=c[l]){for(var v,w=n.call(s,s.__data__,l,c),y=W(s,r),p=0,d=w.length;p<d;++p)(v=w[p])&&S(v,t,r,p,w,y);e.push(w),o.push(s)}return new tn(e,o,t,r)},filter:function(n){"function"!=typeof n&&(n=o(n));for(var t=this._groups,r=t.length,i=new Array(r),u=0;u<r;++u)for(var e,f=t[u],a=f.length,s=i[u]=[],c=0;c<a;++c)(e=f[c])&&n.call(e,e.__data__,c,f)&&s.push(e);return new tn(i,this._parents,this._name,this._id)},merge:function(n){if(n._id!==this._id)throw new Error;for(var t=this._groups,r=n._groups,i=t.length,u=Math.min(i,r.length),e=new Array(i),o=0;o<u;++o)for(var f,a=t[o],s=r[o],c=a.length,h=e[o]=new Array(c),l=0;l<c;++l)(f=a[l]||s[l])&&(h[l]=f);for(;o<i;++o)e[o]=t[o];return new tn(e,this._parents,this._name,this._id)},selection:function(){return new $(this._groups,this._parents)},transition:function(){for(var n=this._name,t=this._id,r=rn(),i=this._groups,u=i.length,e=0;e<u;++e)for(var o,f=i[e],a=f.length,s=0;s<a;++s)if(o=f[s]){var c=W(o,t);S(o,n,r,s,f,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tn(i,this._parents,n,r)},call:un.call,nodes:un.nodes,node:un.node,size:un.size,empty:un.empty,each:un.each,on:function(n,t){var r=this._id;return arguments.length<2?W(this.node(),r).on.on(n):this.each(function(n,t,r){var i,u,e=function(n){return(n+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||"start"===n})}(t)?U:V;return function(){var o=e(this,n),f=o.on;f!==i&&(u=(i=f).copy()).on(t,r),o.on=u}}(r,n,t))},attr:function(n,t){var r=u(n),i="transform"===r?e:Z;return this.attrTween(n,"function"==typeof t?(r.local?function(n,t,r){var i,u,e;return function(){var o,f=r(this);if(null!=f)return(o=this.getAttributeNS(n.space,n.local))===f?null:o===i&&f===u?e:e=t(i=o,u=f);this.removeAttributeNS(n.space,n.local)}}:function(n,t,r){var i,u,e;return function(){var o,f=r(this);if(null!=f)return(o=this.getAttribute(n))===f?null:o===i&&f===u?e:e=t(i=o,u=f);this.removeAttribute(n)}})(r,i,Y(this,"attr."+n,t)):null==t?(r.local?function(n){return function(){this.removeAttributeNS(n.space,n.local)}}:function(n){return function(){this.removeAttribute(n)}})(r):(r.local?function(n,t,r){var i,u;return function(){var e=this.getAttributeNS(n.space,n.local);return e===r?null:e===i?u:u=t(i=e,r)}}:function(n,t,r){var i,u;return function(){var e=this.getAttribute(n);return e===r?null:e===i?u:u=t(i=e,r)}})(r,i,t+""))},attrTween:function(n,t){var r="attr."+n;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;var i=u(n);return this.tween(r,(i.local?function(n,t){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.setAttributeNS(n.space,n.local,i(t))}}return r._value=t,r}:function(n,t){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.setAttribute(n,i(t))}}return r._value=t,r})(i,t))},style:function(n,t,r){var i="transform"==(n+="")?h:Z;return null==t?this.styleTween(n,function(n,t){var r,i,u;return function(){var e=c(this,n),o=(this.style.removeProperty(n),c(this,n));return e===o?null:e===r&&o===i?u:u=t(r=e,i=o)}}(n,i)).on("end.style."+n,function(n){return function(){this.style.removeProperty(n)}}(n)):this.styleTween(n,"function"==typeof t?function(n,t,r){var i,u,e;return function(){var o=c(this,n),f=r(this);return null==f&&(this.style.removeProperty(n),f=c(this,n)),o===f?null:o===i&&f===u?e:e=t(i=o,u=f)}}(n,i,Y(this,"style."+n,t)):function(n,t,r){var i,u;return function(){var e=c(this,n);return e===r?null:e===i?u:u=t(i=e,r)}}(n,i,t+""),r)},styleTween:function(n,t,r){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function(n,t,r){function i(){var i=this,u=t.apply(i,arguments);return u&&function(t){i.style.setProperty(n,u(t),r)}}return i._value=t,i}(n,t,null==r?"":r))},text:function(n){return this.tween("text","function"==typeof n?function(n){return function(){var t=n(this);this.textContent=null==t?"":t}}(Y(this,"text",n)):function(n){return function(){this.textContent=n}}(null==n?"":n+""))},remove:function(){return this.on("end.remove",function(n){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==n)return;t&&t.removeChild(this)}}(this._id))},tween:function(n,t){var r=this._id;if(n+="",arguments.length<2){for(var i,u=W(this.node(),r).tween,e=0,o=u.length;e<o;++e)if((i=u[e]).name===n)return i.value;return null}return this.each((null==t?function(n,t){var r,i;return function(){var u=V(this,n),e=u.tween;if(e!==r)for(var o=0,f=(i=r=e).length;o<f;++o)if(i[o].name===t){(i=i.slice()).splice(o,1);break}u.tween=i}}:function(n,t,r){var i,u;if("function"!=typeof r)throw new Error;return function(){var e=V(this,n),o=e.tween;if(o!==i){u=(i=o).slice();for(var f={name:t,value:r},a=0,s=u.length;a<s;++a)if(u[a].name===t){u[a]=f;break}a===s&&u.push(f)}e.tween=u}})(r,n,t))},delay:function(n){var t=this._id;return arguments.length?this.each(("function"==typeof n?function(n,t){return function(){U(this,n).delay=+t.apply(this,arguments)}}:function(n,t){return t=+t,function(){U(this,n).delay=t}})(t,n)):W(this.node(),t).delay},duration:function(n){var t=this._id;return arguments.length?this.each(("function"==typeof n?function(n,t){return function(){V(this,n).duration=+t.apply(this,arguments)}}:function(n,t){return t=+t,function(){V(this,n).duration=t}})(t,n)):W(this.node(),t).duration},ease:function(n){var t=this._id;return arguments.length?this.each(function(n,t){if("function"!=typeof t)throw new Error;return function(){V(this,n).ease=t}}(t,n)):W(this.node(),t).ease}};var en={time:null,delay:0,duration:250,ease:function(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}};function on(n,t){for(var r;!(r=n.__transition)||!(r=r[t]);)if(!(n=n.parentNode))return en.time=q(),en;return r}s.prototype.interrupt=function(n){return this.each(function(){X(this,n)})},s.prototype.transition=function(n){var t,r;n instanceof tn?(t=n._id,n=n._name):(t=rn(),(r=en).time=q(),n=null==n?null:n+"");for(var i=this._groups,u=i.length,e=0;e<u;++e)for(var o,f=i[e],a=f.length,s=0;s<a;++s)(o=f[s])&&S(o,n,t,s,f,r||on(o,t));return new tn(i,this._parents,n,t)};export{v as d,X as i};