var __awaiter=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,a){function s(t){try{l(i.next(t))}catch(t){a(t)}}function o(t){try{l(i["throw"](t))}catch(t){a(t)}}function l(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,o)}l((i=i.apply(t,e||[])).next())})};var __generator=this&&this.__generator||function(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(e){return l([t,e])}}function l(s){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,r&&(a=s[0]&2?r["return"]:s[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;if(r=0,a)s=[s[0]&2,a.value];switch(s[0]){case 0:case 1:a=s;break;case 4:n.label++;return{value:s[1],done:false};case 5:n.label++;r=s[1];s=[0];continue;case 7:s=n.ops.pop();n.trys.pop();continue;default:if(!(a=n.trys,a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1];a=s;break}if(a&&n.label<a[2]){n.label=a[2];n.ops.push(s);break}if(a[2])n.ops.pop();n.trys.pop();continue}s=e.call(t,n)}catch(t){s=[6,t];r=0}finally{i=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-634af494.system.js","./p-d31c7a5f.system.js","./p-e7dc77b7.system.js","./p-28cf7d6a.system.js","./p-1cb668fb.system.js","./p-078439cc.system.js","./p-ed48dfe7.system.js","./p-feaef0ea.system.js"],function(t){"use strict";var e,n,i,r,a,s,o,l,u,h,c,f,d,p,v,g,y,m,_,b,w,x,S,C,k;return{setters:[function(t){e=t.r;n=t.c;i=t.h;r=t.g},function(t){a=t.c},function(t){s=t.r},function(t){o=t.s},function(t){l=t.e;u=t.s;h=t.v;c=t.w;f=t.x;d=t.y;p=t.l;v=t.z;g=t.A;y=t.B},function(t){m=t.d;_=t.i},function(t){b=t.b;w=t.a},function(t){x=t.D;S=t.a;C=t.d;k=t.e}],execute:function(){function D(){l.preventDefault();l.stopImmediatePropagation()}function A(t){var e=t.document.documentElement,n=u(t).on("dragstart.drag",D,true);if("onselectstart"in e){n.on("selectstart.drag",D,true)}else{e.__noselect=e.style.MozUserSelect;e.style.MozUserSelect="none"}}function B(t,e){var n=t.document.documentElement,i=u(t).on("dragstart.drag",null);if(e){i.on("click.drag",D,true);setTimeout(function(){i.on("click.drag",null)},0)}if("onselectstart"in n){i.on("selectstart.drag",null)}else{n.style.MozUserSelect=n.__noselect;delete n.__noselect}}function M(t){return function(){return t}}function L(t,e,n){this.target=t;this.type=e;this.selection=n}function T(){l.stopImmediatePropagation()}function F(){l.preventDefault();l.stopImmediatePropagation()}var E={name:"drag"},z={name:"space"},H={name:"handle"},j={name:"center"};function I(t){return[+t[0],+t[1]]}function P(t){return[I(t[0]),I(t[1])]}function R(t){return function(e){return f(e,l.touches,t)}}var O={name:"x",handles:["w","e"].map(N),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}};var V={name:"y",handles:["n","s"].map(N),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}};var Y={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var X={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"};var G={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"};var W={overlay:+1,selection:+1,n:null,e:+1,s:null,w:-1,nw:-1,ne:+1,se:+1,sw:-1};var K={overlay:+1,selection:+1,n:-1,e:null,s:+1,w:null,nw:-1,ne:-1,se:+1,sw:+1};function N(t){return{type:t}}function U(){return!l.ctrlKey&&!l.button}function J(){var t=this.ownerSVGElement||this;if(t.hasAttribute("viewBox")){t=t.viewBox.baseVal;return[[t.x,t.y],[t.x+t.width,t.y+t.height]]}return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function q(){return navigator.maxTouchPoints||"ontouchstart"in this}function Q(t){while(!t.__brush)if(!(t=t.parentNode))return;return t.__brush}function Z(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function $(){return tt(O)}function tt(t){var e=J,n=U,i=q,r=true,a=m("start","brush","end"),s=6,o;function f(e){var n=e.property("__brush",x).selectAll(".overlay").data([N("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Y.overlay).merge(n).each(function(){var t=Q(this).extent;u(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])});e.selectAll(".selection").data([N("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Y.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(t){return t.type});r.exit().remove();r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Y[t.type]});e.each(p).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",y).filter(i).on("touchstart.brush",y).on("touchmove.brush",b).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}f.move=function(e,n){if(e.selection){e.on("start.brush",function(){v(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){v(this,arguments).end()}).tween("brush",function(){var e=this,i=e.__brush,r=v(e,arguments),a=i.selection,s=t.input(typeof n==="function"?n.apply(this,arguments):n,i.extent),o=h(a,s);function l(t){i.selection=t===1&&s===null?null:o(t);p.call(e);r.brush()}return a!==null&&s!==null?l:l(1)})}else{e.each(function(){var e=this,i=arguments,r=e.__brush,a=t.input(typeof n==="function"?n.apply(e,i):n,r.extent),s=v(e,i).beforestart();_(e);r.selection=a===null?null:a;p.call(e);s.start().brush().end()})}};f.clear=function(t){f.move(t,null)};function p(){var t=u(this),e=Q(this).selection;if(e){t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]);t.selectAll(".handle").style("display",null).attr("x",function(t){return t.type[t.type.length-1]==="e"?e[1][0]-s/2:e[0][0]-s/2}).attr("y",function(t){return t.type[0]==="s"?e[1][1]-s/2:e[0][1]-s/2}).attr("width",function(t){return t.type==="n"||t.type==="s"?e[1][0]-e[0][0]+s:s}).attr("height",function(t){return t.type==="e"||t.type==="w"?e[1][1]-e[0][1]+s:s})}else{t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}}function v(t,e,n){return!n&&t.__brush.emitter||new g(t,e)}function g(t,e){this.that=t;this.args=e;this.state=t.__brush;this.active=0}g.prototype={beforestart:function(){if(++this.active===1)this.state.emitter=this,this.starting=true;return this},start:function(){if(this.starting)this.starting=false,this.emit("start");else this.emit("brush");return this},brush:function(){this.emit("brush");return this},end:function(){if(--this.active===0)delete this.state.emitter,this.emit("end");return this},emit:function(e){c(new L(f,e,t.output(this.state.selection)),a.apply,a,[e,this.that,this.args])}};function y(){if(o&&!l.touches)return;if(!n.apply(this,arguments))return;var e=this,i=l.target.__data__.type,a=(r&&l.metaKey?i="overlay":i)==="selection"?E:r&&l.altKey?j:H,s=t===V?null:W[i],h=t===O?null:K[i],c=Q(e),f=c.extent,g=c.selection,y=f[0][0],m,b,w=f[0][1],x,S,C=f[1][0],k,D,M=f[1][1],L,I,P=0,N=0,U,J=s&&h&&r&&l.shiftKey,q,$,tt=l.touches?R(l.changedTouches[0].identifier):d,et=tt(e),nt=et,it=v(e,arguments,true).beforestart();if(i==="overlay"){if(g)U=true;c.selection=g=[[m=t===V?y:et[0],x=t===O?w:et[1]],[k=t===V?C:m,L=t===O?M:x]]}else{m=g[0][0];x=g[0][1];k=g[1][0];L=g[1][1]}b=m;S=x;D=k;I=L;var rt=u(e).attr("pointer-events","none");var at=rt.selectAll(".overlay").attr("cursor",Y[i]);if(l.touches){it.moved=ot;it.ended=ut}else{var st=u(l.view).on("mousemove.brush",ot,true).on("mouseup.brush",ut,true);if(r)st.on("keydown.brush",ht,true).on("keyup.brush",ct,true);A(l.view)}T();_(e);p.call(e);it.start();function ot(){var t=tt(e);if(J&&!q&&!$){if(Math.abs(t[0]-nt[0])>Math.abs(t[1]-nt[1]))$=true;else q=true}nt=t;U=true;F();lt()}function lt(){var t;P=nt[0]-et[0];N=nt[1]-et[1];switch(a){case z:case E:{if(s)P=Math.max(y-m,Math.min(C-k,P)),b=m+P,D=k+P;if(h)N=Math.max(w-x,Math.min(M-L,N)),S=x+N,I=L+N;break}case H:{if(s<0)P=Math.max(y-m,Math.min(C-m,P)),b=m+P,D=k;else if(s>0)P=Math.max(y-k,Math.min(C-k,P)),b=m,D=k+P;if(h<0)N=Math.max(w-x,Math.min(M-x,N)),S=x+N,I=L;else if(h>0)N=Math.max(w-L,Math.min(M-L,N)),S=x,I=L+N;break}case j:{if(s)b=Math.max(y,Math.min(C,m-P*s)),D=Math.max(y,Math.min(C,k+P*s));if(h)S=Math.max(w,Math.min(M,x-N*h)),I=Math.max(w,Math.min(M,L+N*h));break}}if(D<b){s*=-1;t=m,m=k,k=t;t=b,b=D,D=t;if(i in X)at.attr("cursor",Y[i=X[i]])}if(I<S){h*=-1;t=x,x=L,L=t;t=S,S=I,I=t;if(i in G)at.attr("cursor",Y[i=G[i]])}if(c.selection)g=c.selection;if(q)b=g[0][0],D=g[1][0];if($)S=g[0][1],I=g[1][1];if(g[0][0]!==b||g[0][1]!==S||g[1][0]!==D||g[1][1]!==I){c.selection=[[b,S],[D,I]];p.call(e);it.brush()}}function ut(){T();if(l.touches){if(l.touches.length)return;if(o)clearTimeout(o);o=setTimeout(function(){o=null},500)}else{B(l.view,U);st.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null)}rt.attr("pointer-events","all");at.attr("cursor",Y.overlay);if(c.selection)g=c.selection;if(Z(g))c.selection=null,p.call(e);it.end()}function ht(){switch(l.keyCode){case 16:{J=s&&h;break}case 18:{if(a===H){if(s)k=D-P*s,m=b+P*s;if(h)L=I-N*h,x=S+N*h;a=j;lt()}break}case 32:{if(a===H||a===j){if(s<0)k=D-P;else if(s>0)m=b-P;if(h<0)L=I-N;else if(h>0)x=S-N;a=z;at.attr("cursor",Y.selection);lt()}break}default:return}F()}function ct(){switch(l.keyCode){case 16:{if(J){q=$=J=false;lt()}break}case 18:{if(a===j){if(s<0)k=D;else if(s>0)m=b;if(h<0)L=I;else if(h>0)x=S;a=H;lt()}break}case 32:{if(a===z){if(l.altKey){if(s)k=D-P*s,m=b+P*s;if(h)L=I-N*h,x=S+N*h;a=j}else{if(s<0)k=D;else if(s>0)m=b;if(h<0)L=I;else if(h>0)x=S;a=H}at.attr("cursor",Y[i]);lt()}break}default:return}F()}}function b(){v(this,arguments).moved()}function w(){v(this,arguments).ended()}function x(){var n=this.__brush||{selection:null};n.extent=P(e.apply(this,arguments));n.dim=t;return n}f.extent=function(t){return arguments.length?(e=typeof t==="function"?t:M(P(t)),f):e};f.filter=function(t){return arguments.length?(n=typeof t==="function"?t:M(!!t),f):n};f.handleSize=function(t){return arguments.length?(s=+t,f):s};f.keyModifiers=function(t){return arguments.length?(r=!!t,f):r};f.on=function(){var t=a.on.apply(a,arguments);return t===a?f:t};return f}function et(t,e,n,i,r,a,s,o){return $().handleSize(r).extent([[0,0],[t-s,e-o+a/2]]).on("brush",n).on("end",i)}function nt(t,e){var n=e.select("g.brush");if(n.empty()){n=e.append("g");n.attr("class","brush")}n.call(t);return n}function it(t,e,n,i){var r=t.select("line.bottomline");if(r.empty()){r=t.append("line").attr("class","bottomline").attr("stroke-width",4).style("opacity",0).attr("pointer-events","none")}r.attr("y1",i(0)).attr("y2",i(0));var a=t.selectAll(".handle--wrapper");var s=Math.floor((e-2)/2);if(a.empty()){a=a.data([{type:"w"},{type:"e"}]).enter().append("g").attr("class","handle--wrapper");a.append("rect").attr("class","handle--custom").attr("width",e).attr("height",n).attr("rx",1).attr("ry",1);var o=a.append("g").attr("class","handle--grab");for(var l=0;l<3;l++){o.append("line").attr("transform","translate(0 "+(n/2-2)+")").attr("x1",s).attr("y1",l*2).attr("x2",e-s).attr("y2",l*2).attr("class","grab-line")}}return a}var rt={addBrush:et,addBrushArea:nt,addCustomHandles:it};function at(t){return p().domain(st(t)).range([0,t.length])}function st(t){var e=(t.length>0?t[0]:{start:0}).start;var n=(t.length>0?t[t.length-1]:{end:0}).end;return[e,n]}function ot(t){return[Math.min(0,lt(t)),g(t,function(t){return t.value})]}function lt(t){return v(t,function(t){return t.value})}function ut(t,e){return p().domain(t).range([0,e])}function ht(t){return t.every(ft)}function ct(t){var e=t.every(dt);return t.map(function(t,n){var i=Object.assign({},t);if(!e){i.start=n;i.end=n+1}return i})}function ft(t){return t.category!==undefined}function dt(t){return t.start!==undefined&&t.end!==undefined}function pt(t,e){var n=[t,e].map(function(t){return t===null});if(n[0]!==n[1]){return false}if(n[0]&&n[1]){return true}if(t.length!==e.length){return true}var i=t.every(ft);var r=t.every(dt);for(var a=0;a<t.length;a++){if(r){if(e[a].start!==t[a].start||e[a].end!==t[a].end){return false}}if(i){if(e[a].category!==t[a].category){return false}}}return true}var vt={getLowerBounds:lt,getXDomain:st,getXScale:ut,getYDomain:ot,isBackgroundCompatible:pt,isCategoricalData:ht,prepareData:ct};var gt=3;var yt=y(".2~s");var mt=y(".2");function _t(t){t.select(".domain").remove()}function bt(t,e,n,i,r,a,s){var o=t.select(".xAxis");var l=t.select(".yAxis");n.domain(s).nice();e.domain(a);o.call(i);l.call(r)}function wt(t){if(t.select(".plot").empty()){var e=t.append("g");e.attr("class","plot");return e}return t.select(".plot")}function xt(t,e,n,i,r,a,s,o,l){if(o===void 0){o=false}if(l===void 0){l=""}if(!n||!n.node()){return}var u=1;var h=n.node().getBoundingClientRect().height-s;var c=n.node().getBoundingClientRect().width-a;t=t===null?[]:t;var f=t.length===0?c:c/t.length;if(f-u<gt){u=0}this.bars=i.selectAll("rect."+l).data(t);this.bars.exit().remove().transition().duration(200);var d=this.bars.enter().append("rect").attr("y",h).attr("height",0).merge(this.bars).attr("class","bar "+l).attr("x",function(t,e){return e*f}).attr("width",function(){return Math.max(0,f-u)}).style("fill",function(t){return t.color||r});var p=e.domain()[0];var v=e(Math.max(0,p));(o?d:d.transition().delay(Dt)).attr("height",function(t){return Math.abs(e(t.value)-v)}).attr("y",function(t){return t.value>0?e(t.value):v});(o?this.bars:this.bars.transition().delay(Dt)).attr("height",function(t){return Math.abs(e(t.value)-v)}).attr("y",function(t){return t.value>0?e(t.value):v})}function St(t,e,n,i,r,a,s){if(a===void 0){a=At}if(!t||!t.node()){return}var o=t.node().getBoundingClientRect().height-r;var l=t.node().getBoundingClientRect().width-i;var u=[0,n/2,n];var h=s.padding!==undefined?s.padding:13;var c=s.ticks!==undefined?s.ticks:u.length;var f=p().domain([0,n]).range([0,l]);var d=p().domain(e).range([0,n]);var v;if(s.values||s.format){var g=p().domain(e).range([0,l]);v=b(g).tickValues(s.values||null).tickFormat(s.format||a)}else{v=b(f).tickValues(c!==undefined?null:u).tickFormat(function(t){var e=d.invert(t);return a(e)})}v.tickSize(-o).tickPadding(h).ticks(c);if(t.select(".x-axis").empty()){t.append("g").attr("class","x-axis").attr("transform","translate(0, "+o+")").call(v)}else{t.select(".x-axis").attr("transform","translate(0, "+o+")").call(v)}t.selectAll(".x-axis text").attr("transform",function(t,e,n){var i=n[e];var r=i.getBoundingClientRect().width;var a=0;if(e===0){a=r/2}else if(e===n.length-1){a=-r/2}return"translate("+a+")"}).attr("opacity",function(t,e,n){if(e===0||e===n.length-1){return 1}var i=0;var r=n;for(var a=0,s=r;a<s.length;a++){var o=s[a];i+=o.getBoundingClientRect().width}if(l-i<0){return 0}return 1});return v}function Ct(t,e,n){if(!t||!t.node()){return}if(t.select(".y-axis").empty()){t.append("g").attr("class","y-axis").call(e)}else{t.select(".y-axis").call(e)}t.select(".y-axis").append("g").attr("class","tick").attr("opacity","1").attr("transform","translate(0,"+e.scale()(0)+")").append("line").attr("shape-rendering","crisp").attr("stroke","#000").attr("class","zero").attr("x2",t.node().getBoundingClientRect().width-n)}function kt(t,e,n,i,r){if(!t||!t.node()){return}var a=t.node().getBoundingClientRect().height-i;var s=t.node().getBoundingClientRect().width-n;var o=r.ticks!==undefined?r.ticks:5;var l=r.padding!==undefined?r.padding:10;var u=p().domain(e).range([a,0]);var h=w(u).tickSize(-s).ticks(o).tickPadding(l).tickFormat(r.format||At).tickValues(r.values||null);return h}function Dt(t,e){return e}function At(t){if(t>0&&t<1){return mt(t)}return yt(t)}var Bt={cleanAxes:_t,conditionalFormatter:At,generateYScale:kt,renderBars:xt,renderPlot:wt,renderXAxis:St,renderYAxis:Ct,updateAxes:bt};function Mt(t,e,n,i,r,a,s,u){var h=this;t.on("mousemove",function(){var t=l;var c=t.clientX,f=t.clientY;var d=false;Tt(e,c,f,u,function(e,l,u,c){return __awaiter(h,void 0,void 0,function(){var h,f,p;return __generator(this,function(v){switch(v.label){case 0:h=Lt(n.selection,u);f=h?e.color||i:r;f=o(-.16,f);l.style("fill",f);return[4,a(e)];case 1:p=v.sent();s(p,c,t);d=true;return[2]}})})},function(t,e,a){var s=Lt(n.selection,a);e.style("fill",s?t.color||i:r)});if(!d){s(null,null)}}).on("click",function(){var t=l;var i=t.clientX,r=t.clientY;Tt(e,i,r,u,function(t){n.setSelection([t.start,t.end],true)})}).on("mouseleave",function(){s(null,null);e.selectAll("rect."+u).style("fill",function(t,e){if(Lt(n.selection,e)){return t.color||i}return r})})}function Lt(t,e){if(t===null){return true}return e>=t[0]&&e<t[1]}function Tt(t,e,n,i,r,a){t.selectAll("rect."+i).each(function(t,i,s){var o=u(s[i]);var l=s[i];var h=l.getBoundingClientRect();var c=h.left<=e&&e<=h.right&&h.top<=n&&n<=h.bottom;if(c){r(t,o,i,h);return}if(a){a(t,o,i,null)}})}var Ft={addTooltip:Mt};var Et=8;var zt=20;var Ht=38;var jt=40;var It=25;var Pt="foreground-bar";var Rt="background-bar";var Ot=t("as_histogram_widget",function(){function t(t){e(this,t);this.showHeader=true;this.disableInteractivity=false;this.data=[];this.backgroundData=null;this.color=x;this.unselectedColor=S;this.tooltipFormatter=this.formatter;this.isLoading=false;this.error="";this.errorDescription="";this.noDataHeaderMessage="NO DATA AVAILABLE";this.noDataBodyMessage="There is no data to display.";this.responsive=true;this.clearText="Clear selection";this.selectedFormatter=this._selectionFormatter;this.range=null;this.disableAnimation=false;this.xAxisOptions={};this.yAxisOptions={};this.selection=null;this.tooltip=null;this._firstDataSupplied=false;this._muteSelectionChanged=false;this._lastEmittedSelection=null;this.selectionEmpty=true;this.selectionFooter="";this._resizeRender=this._resizeRender.bind(this);this._setTooltip=this._setTooltip.bind(this);this.selectionChanged=n(this,"selectionChanged",7);this.selectionInput=n(this,"selectionInput",7);this.drawParametersChanged=n(this,"drawParametersChanged",7)}t.prototype._onBackgroundDataChanged=function(t){if(t===null||t.length===0){this._prepareData(this.data,null);return}if(pt(this.data,t)){this._prepareData(this.data,t)}};t.prototype._onDataChanged=function(t,e){this.onNewData(t,e);if(!this._firstDataSupplied){this._firstDataSupplied=Boolean(t&&t.length)}};t.prototype.onNewData=function(t,e){this._lastEmittedSelection=null;if(pt(t,this.backgroundData)){this._prepareData(this.data,this.backgroundData,e)}else{this._prepareData(this.data,null,e)}};t.prototype._prepareData=function(t,e,n){this._data=ct(t);this._backgroundData=e===null?this._mockBackgroundData(t):ct(e);var i=at(this._data);var r=!!this.isCategoricalData;this.isCategoricalData=ht(this._data);if(r!==this.isCategoricalData){this.selection=null}else{this.selection=this._preadjustSelection(n,i,t.length)}this.binsScale=i;this._muteSelectionChanged=true;this._dataJustChanged=true};t.prototype._onColorChanged=function(t){var e=t||x;this._color=this._toColor(e,C)};t.prototype._onSelectedColorChanged=function(t){var e=t||S;this._barBackgroundColor=this._toColor(e,k)};t.prototype.defaultFormatter=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.formatter(t)]})})};t.prototype.getSelection=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){t=this._dataForSelection(this.selection);return[2,this._simplifySelection(t)]})})};t.prototype.setSelection=function(t,e){if(e===void 0){e=false}return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){if(t===null){this._setSelection(null);this.emitSelection(this.selectionChanged,this.selection);return[2]}if(t.some(function(t){return typeof t==="string"})){return[2]}n=t.map(this.binsScale);this._setSelection(n);if(e||!this._muteSelectionChanged){this.emitSelection(this.selectionChanged,this.selection)}return[2]})})};t.prototype.clearSelection=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){this.setSelection(null);return[2]})})};t.prototype.xFormatter=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this._xFormatter(t)]})})};t.prototype.componentDidLoad=function(){var t=this;this._color=this._toColor(this.color,C);this._barBackgroundColor=this._toColor(this.unselectedColor,k);if(!this._hasDataToDisplay()){return}this.isCategoricalData=ht(this._data);requestAnimationFrame(function(){t._renderGraph()})};t.prototype.componentDidUpdate=function(){if(!this._dataJustChanged){return}this._renderGraph();this._dataJustChanged=false};t.prototype.componentWillLoad=function(){addEventListener("resize",this._resizeRender);this._firstDataSupplied=Boolean(this.data&&this.data.length);this.selectionFooter=this.selectedFormatter(this.selection);this._onBackgroundDataChanged(this.backgroundData);this.onNewData(this.data,null)};t.prototype.componentDidUnload=function(){removeEventListener("resize",this._resizeRender)};t.prototype.render=function(){if(this._isLoading()){return i("as-histogram-widget-placeholder",null,this._renderHeader())}return[this._renderHeader(),this._renderSelection(),this._renderContent()]};t.prototype._resizeRender=function(){var t=this;requestAnimationFrame(function(){t._renderGraph()})};t.prototype._renderContent=function(){var t=this;var e={"as-histogram-widget--categorical":this.isCategoricalData,"as-histogram-widget__wrapper":true,"as-histogram-widget__wrapper--disabled":this.disableInteractivity};var n={figure:true,"figure--has-x-label":!!this.xLabel,"figure--has-y-label":!!this.yLabel};return a(this._isLoading(),this.error,this._isEmpty(),this.heading,this.errorDescription,this.noDataBodyMessage,i("div",{class:e},i("svg",{class:n,ref:function(e){return t.container=u(e)}}),this._renderLabels(),this._renderTooltip()))};t.prototype._mockBackgroundData=function(t){var e=vt.getLowerBounds(t);return t.map(function(t){return Object.assign({},t,{value:Math.max(0,e)})})};t.prototype._selectionFormatter=function(t){if(t===null){return"All selected"}if(this.isCategoricalData){return t[1]-t[0]+" selected"}var e;var n=t.map(this.binsScale.invert);if(this.axisFormatter){e=n.map(this.axisFormatter)}else{e=n.map(function(t){return""+At(t)})}return"Selected from "+e[0]+" to "+e[1]};t.prototype._renderSelection=function(){var t=this;if(this._isLoading()||this._isEmpty()||this.error||!this.showClear){return""}return i("as-widget-selection",{selection:this.selectionFooter,clearText:this.clearText,showClear:!this.selectionEmpty,onClear:function(){return t.clearSelection()}})};t.prototype._renderGraph=function(){var t=this;if(!this.container||!this.container.node()){return}var e=this.container.node().getBoundingClientRect();var n=this.prevWidth===undefined||this.prevHeight===undefined;this.prevWidth=this.width;this.prevHeight=this.height;this.width=e.width;this.height=e.height;var i=!n&&(this.prevWidth!==this.width||this.height!==this.prevHeight);if(this.height===0||this.width===0){return}this._generateYAxis();this._renderXAxis();this.barsContainer=Bt.renderPlot(this.container);Ft.addTooltip(this.container,this.barsContainer,this,this._color,this._barBackgroundColor,function(e){return t.tooltipFormatter(e)},this._setTooltip,Pt);Bt.renderBars(this._backgroundData,this.yScale,this.container,this.barsContainer,this._barBackgroundColor,Ht+(this.yLabel?It:0),jt,this.disableAnimation||i,Rt);Bt.renderBars(this._data,this.yScale,this.container,this.barsContainer,this._color,Ht+(this.yLabel?It:0),jt,this.disableAnimation||i,Pt);Bt.renderYAxis(this.container,this.yAxis,Ht);if(!this.disableInteractivity){this.brush=rt.addBrush(this.width,this.height,this._onBrush.bind(this),this._onBrushEnd.bind(this),Et,zt,Ht+(this.yLabel?It:0),jt);this.brushArea=rt.addBrushArea(this.brush,this.container);this.customHandles=rt.addCustomHandles(this.brushArea,Et,zt,this.yScale)}this._updateSelection();this.drawParametersChanged.emit({binsScale:this.binsScale,container:this.container,handleWidth:Et,height:this.height,padding:[Ht+(this.yLabel?It:0),jt],width:this.width,xScale:this.xScale});this._muteSelectionChanged=false};t.prototype._setTooltip=function(t,e){if(t===null){this._hideTooltip();return}this.tooltip=t;this._showTooltip(e)};t.prototype._updateSelection=function(){if(this.selection===null||this.disableInteractivity){return}if(this._selectionInData(this.selection)){this._setSelection(this.selection)}else{this.clearSelection()}};t.prototype._adjustSelection=function(t){var e=this;if(t===null){return null}return t.map(function(t){return e._adjustSelectionValue(t)})};t.prototype._adjustSelectionValue=function(t){if(t<0){return 0}if(t>=this._data.length){return this._data.length}return Math.round(t)};t.prototype._hideCustomHandles=function(){this.customHandles.style("opacity",0);this.brushArea.selectAll(".bottomline").style("opacity",0)};t.prototype._onBrush=function(){var t=this;if(this.disableInteractivity){return}var e=l;if(e.selection===null){this._hideCustomHandles();return}if(!e.sourceEvent||e.sourceEvent.type==="brush"){return}var n=e.selection.map(function(e){return t.xScale.invert(e)});this._setSelection(n)};t.prototype._onBrushEnd=function(){if(this.disableInteractivity){return}if(!this._muteSelectionChanged){this.emitSelection(this.selectionChanged,this.selection)}};t.prototype._setSelection=function(t){if(this.disableInteractivity){return}var e=this._adjustSelection(t);if(e!==null&&e[0]===e[1]){return}var n=this.selection!==null&&e!==null&&this.selection.every(function(t,n){return e[n]===t});this.selection=e;this._updateHandles(e);if(!n){this._hideTooltip();this.emitSelection(this.selectionInput,this.selection)}this.selectionEmpty=this.selection===null;this.selectionFooter=this.selectedFormatter(this.selection)};t.prototype._preadjustSelection=function(t,e,n){var i=this;if(!(t&&this.selection)){return this.selection}if(this.isCategoricalData){var r=this._simplifySelection(this._dataForSelection(this.selection,t));var a=r.map(function(t){return i._data.findIndex(function(e){return e.category===t})});if(a.some(function(t){return t===-1})){return null}return[a[0],a[a.length-1]+1]}var s=this._simplifySelection(this._dataForSelection(this.selection,t));var o=s.map(e).map(Math.round);return[Math.max(0,o[0]),Math.min(n,o[1])]};t.prototype._dataForSelection=function(t,e){if(t===null){return null}var n=e!==undefined?e:this.data;if(this.isCategoricalData){return n.slice(t[0],t[1]).map(function(t){return t})}return[n[t[0]],n[t[1]-1]]};t.prototype._simplifySelection=function(t){if(t===null){return null}if(this.isCategoricalData){return t.map(function(t){return t.category})}return[t[0].start,t[t.length-1].end]};t.prototype._sameSelection=function(t,e){if(t===null||e===null){return false}return t[0]===e[0]&&t[1]===e[1]};t.prototype.emitSelection=function(t,e){if(this._sameSelection(e,this._lastEmittedSelection)){return}if(e===null){t.emit(null);return}var n=this._dataForSelection(e);var i={payload:n,selection:this._simplifySelection(n),type:this._eventType()};t.emit(i);if(t===this.selectionChanged){this._lastEmittedSelection=[e[0],e[1]]}};t.prototype._eventType=function(){return this.isCategoricalData?"categorical":"continuous"};t.prototype._selectionInData=function(t){var e=this;var n=t.map(this.binsScale.invert);var i=n.map(function(t){return e._data.some(function(e){return t>=e.start&&t<=e.end})});return i.some(function(t){return t})};t.prototype._updateHandles=function(t){var e=this;if(!this.xScale){return}if(t===null){this.barsContainer.selectAll("rect."+Pt).style("fill",function(t,n){var i=e._data[n];return i.color||e._color});this.brushArea.call(this.brush.move,null);return}var n=this.yScale(this.yScale.domain()[0]);var i=t.map(this.xScale);this.brushArea.call(this.brush.move,i);this.customHandles.style("opacity",1).attr("transform",function(t,e){return"translate("+(i[e]-Et/2-1)+","+(n-zt/2)+")"});this.brushArea.selectAll(".bottomline").style("opacity",1).attr("stroke-width",2).attr("x1",i[0]).attr("x2",i[1]);this.barsContainer.selectAll("rect."+Pt).style("fill",function(n,i){var r=e._data[i];if(!r){return}if(i<t[0]||i>=t[1]){return e._barBackgroundColor}return r.color||e._color})};t.prototype._dataForDomain=function(){var t=Math.max.apply(window,this._data.map(function(t){return t.value}));var e=Math.max.apply(window,this._backgroundData.map(function(t){return t.value}));if(t>e){return this._data}return this._backgroundData};t.prototype._generateYAxis=function(){var t=this.range!==null?this.range:vt.getYDomain(this._dataForDomain());this.yAxis=Bt.generateYScale(this.container,t,Ht+(this.yLabel?It:0),jt,this.yAxisOptions);this.yScale=this.yAxis.scale()};t.prototype._renderXAxis=function(){var t=vt.getXDomain(this._data);var e=Bt.renderXAxis(this.container,t,this._data.length,Ht+(this.yLabel?It:0),jt,this.axisFormatter,this.xAxisOptions);this.xScale=e.scale()};t.prototype._showTooltip=function(t){if(!this.tooltipElement){return}u(this.tooltipElement).style("display","inline").style("left",t.left+t.width/2+"px").style("top",t.top+"px")};t.prototype._hideTooltip=function(){u(this.tooltipElement).style("display","none")};t.prototype._renderHeader=function(){if(!this.showHeader){return}return i("as-widget-header",{header:this.heading,subheader:this.description,"is-loading":this._isLoading(),"is-empty":this._isEmpty(),error:this.error,"no-data-message":this.noDataHeaderMessage})};t.prototype._renderTooltip=function(){var t=this;return i("span",{ref:function(e){return t.tooltipElement=e},role:"tooltip",class:"as-tooltip as-tooltip--top"},this._parseTooltip(this.tooltip))};t.prototype._parseTooltip=function(t){var e=this;if(t===null){return null}if(Array.isArray(t)){return t.map(function(t){return e._renderTooltipLine(t)})}return this._renderTooltipLine(t)};t.prototype._renderTooltipLine=function(t){return i("div",null,t)};t.prototype._renderLabels=function(){return[this.yLabel?i("div",{class:"y-label"},this.yLabel):"",this.xLabel?i("div",{class:"x-label"},this.xLabel):""]};t.prototype._toColor=function(t,e){if(t.startsWith("var(")){var n=t.match(/var\(([^,\)]+)(,.+)?\)/);if(n===null){return e}var i=n[1];var r=(n[2]||"").replace(",","").trim();var a=getComputedStyle(this.el).getPropertyValue(i).toLowerCase().trim();if(a.length===0){return r.length===0?e:r}return a}return t};t.prototype._isLoading=function(){return(!this._firstDataSupplied||this.isLoading)&&!this.error};t.prototype._isEmpty=function(){return this._data&&!this._data.length};t.prototype._hasDataToDisplay=function(){return!(this._isLoading()||this._isEmpty()||this.error)};t.prototype.formatter=function(t){var e=[];if(this.isCategoricalData){e.push(""+t.category)}else{e.push(this._xFormatter(t.start)+" - "+this._xFormatter(t.end))}e.push(""+s(t.value).trim());return e};t.prototype._xFormatter=function(t){if(this.axisFormatter){return this.axisFormatter(t)}else{return At(t)}};Object.defineProperty(t.prototype,"el",{get:function(){return r(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{backgroundData:["_onBackgroundDataChanged"],data:["_onDataChanged"],color:["_onColorChanged"],unselectedColor:["_onSelectedColorChanged"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".as-tooltip{--as--tooltip--background-color:var(--as--color--type-01,#2c2c2c);--as--tooltip--color:var(--as--color--text-contrast,#fff);--as--tooltip--support-color:var(--as--color--white,#fff);--as--tooltip--primary--background-color:var(--as--primary--success,#1785fb);--as--tooltip--primary--color:var(--as--tooltip--support-color);--as--tooltip--secondary--background-color:var(--as--secondary--success,#0f2d53);--as--tooltip--secondary--color:var(--as--tooltip--support-color);--as--tooltip--complementary--background-color:var(--as--complementary--success,#47db99);--as--tooltip--complementary--color:var(--as--tooltip--support-color);--as--tooltip--error--background-color:var(--as--color--error,#f3522b);--as--tooltip--error-color:var(--as--tooltip--support-color);--as--tooltip--warning--background-color:var(--as--color--warning,#fdb32b);--as--tooltip--warning--color:var(--as--tooltip--support-color);--as--tooltip--success--background-color:var(--as--color--success,#80b622);--as--tooltip--success--color:var(--as--tooltip--support-color);display:-ms-inline-flexbox;display:inline-flex;position:relative;padding:4px 8px;border-width:0;border-radius:4px;border-color:var(--as--tooltip--background-color);background:var(--as--tooltip--background-color);color:var(--as--tooltip--color);font:var(--as--font--body)}.as-tooltip:after{content:\"\";position:absolute;border-width:5px;border-style:solid;border-radius:2px;border-color:inherit}.as-tooltip--top:after{top:100%;left:50%;-webkit-transform:translateY(-6px) translateX(-5px) rotate(45deg);transform:translateY(-6px) translateX(-5px) rotate(45deg)}.as-tooltip--bot:after,.as-tooltip--bottom:after{bottom:100%;left:50%;-webkit-transform:translateY(6px) translateX(-5px) rotate(45deg);transform:translateY(6px) translateX(-5px) rotate(45deg)}.as-tooltip--right:after{top:50%;left:0;-webkit-transform:translateY(-5px) translateX(-4px) rotate(45deg);transform:translateY(-5px) translateX(-4px) rotate(45deg)}.as-tooltip--left:after{top:50%;right:0;-webkit-transform:translateY(-4px) translateX(4px) rotate(45deg);transform:translateY(-4px) translateX(4px) rotate(45deg)}.as-tooltip--primary{border-color:var(--as--tooltip--primary--background-color);background:var(--as--tooltip--primary--background-color);color:var(--as--tooltip--primary--color)}.as-tooltip--secondary{border-color:var(--as--tooltip--secondary--background-color);background:var(--as--tooltip--secondary--background-color);color:var(--as--tooltip--secondary--color)}.as-tooltip--complementary{border-color:var(--as--tooltip--complementary--background-color);background:var(--as--tooltip--complementary--background-color);color:var(--as--tooltip--complementary--color)}.as-tooltip--error{border-color:var(--as--tooltip--error--background-color);background:var(--as--tooltip--error--background-color);color:var(--as--tooltip--error--color)}.as-tooltip--warning{border-color:var(--as--tooltip--warning--background-color);background:var(--as--tooltip--warning--background-color);color:var(--as--tooltip--warning--color)}.as-tooltip--success{border-color:var(--as--tooltip--success--background-color);background:var(--as--tooltip--success--background-color);color:var(--as--tooltip--success--color)}as-histogram-widget{--as--histogram-widget--background-color:var(--as--color--ui-01,#fff);--as--histogram-widget--figure--stroke-color:var(--as--color--secondary,#0f2d53);--as--histogram-widget--figure--text-color:var(--as--color--type-01,#2c2c2c);--as--histogram-widget--label-color:var(--as--color--type-01,#2c2c2c);--as--histogram-widget--label-font:var(--as--font--caption);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%;min-width:228px;height:100%;max-height:100%;overflow:auto;background:var(--as--histogram-widget--background-color)}as-histogram-widget as-widget-header{padding-top:6px}as-histogram-widget .as-histogram-widget__wrapper{display:-ms-flexbox;display:flex;position:relative;-ms-flex:1;flex:1;min-height:0}as-histogram-widget .as-histogram-widget--categorical .x-axis{opacity:0}as-histogram-widget .figure{-webkit-box-sizing:border-box;box-sizing:border-box;-ms-flex:1;flex:1;width:100%;min-height:0;padding:18px 8px 17px 30px;overflow:visible}as-histogram-widget .figure--has-x-label{margin-bottom:25px}as-histogram-widget .figure--has-y-label{padding-left:55px}as-histogram-widget .figure text{fill:var(--as--histogram-widget--figure--text-color)}as-histogram-widget .figure .brush .selection{stroke:none;fill:none}as-histogram-widget .figure .foreground-bar{cursor:pointer}as-histogram-widget .figure .y-axis{--widget-axis-text-color:var(--as--color--type-01,#2c2c2c);--widget-axis-line-color:var(--as--color--ui-05,#b3b3b3)}as-histogram-widget .figure .y-axis .tick text{width:30px;fill:var(--widget-axis-text-color);white-space:pre}as-histogram-widget .figure .y-axis .tick line{stroke:var(--widget-axis-line-color);opacity:.1}as-histogram-widget .figure .y-axis .tick line.zero{opacity:.5}as-histogram-widget .figure .x-axis .domain,as-histogram-widget .figure .x-axis .tick line,as-histogram-widget .figure .y-axis .domain{display:none}as-histogram-widget .figure .handle--wrapper{opacity:0}as-histogram-widget .figure .handle--custom{stroke-linecap:round;stroke:var(--as--histogram-widget--figure--stroke-color);fill:#fff;cursor:ew-resize;pointer-events:none}as-histogram-widget .figure .grab-line{stroke:#ccc}as-histogram-widget .figure .bottomline{stroke:var(--as--histogram-widget--figure--stroke-color)}as-histogram-widget .as-histogram-widget__wrapper--disabled svg .bar{cursor:inherit}as-histogram-widget .as-histogram-widget__footer{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;margin-top:8px}as-histogram-widget .as-histogram-widget__selection{margin:0}as-histogram-widget .x-label,as-histogram-widget .y-label{color:var(--as--histogram-widget--label-color);font:var(--as--histogram-widget--label-font);text-align:center}as-histogram-widget .x-label{position:absolute;bottom:0;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}as-histogram-widget .y-label{position:absolute;top:50%;left:0;margin-left:4px;-webkit-transform:rotate(-90deg) translate(-50%);transform:rotate(-90deg) translate(-50%);-webkit-transform-origin:0 0;transform-origin:0 0}as-histogram-widget [role=tooltip]{display:none;position:fixed;-webkit-transform:translate(-50%,-120%);transform:translate(-50%,-120%);pointer-events:none}"},enumerable:true,configurable:true});return t}())}}});