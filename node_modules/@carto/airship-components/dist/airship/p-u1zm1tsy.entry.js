import{r as t,c as s,h as e,g as i}from"./p-3fce0d94.js";const h=class{constructor(e){t(this,e),this.minValue=0,this.maxValue=10,this.step=1,this.disabled=!1,this.draggable=!1,this.isDraggable=!1,this.showThumb=!0,this.showThumbCaption=!0,this.thumbs=[],this.change=s(this,"change",7),this.changeStart=s(this,"changeStart",7),this.changeEnd=s(this,"changeEnd",7)}validateValue(t){if(!this._isBetweenValidValues(t))throw new Error(`RangeSlider: Value ${t} has to be between `+`minValue (${this.minValue}) and maxValue (${this.maxValue})`);this._updateThumbs()}validateRange(t){if(2!==t.length)throw new Error(`RangeSlider: Range ${t} need two values at most`);t.map(t=>this.validateValue(t)),this._updateThumbs()}componentWillLoad(){this._validateValues(),this._updateThumbs()}componentDidRender(){this._checkLabelOverflow()}componentDidLoad(){this.checkThumbCollision()}render(){if(!(this.thumbs.length<1))return e("div",{class:{"as-range-slider":!0,"as-range-slider--disabled":this.disabled}},e("div",{class:"as-range-slider__rail"},this.thumbs.map(t=>this._renderThumb(t)),this._renderRangeBar(),this._renderCollapsedLabel()))}_getLabelOffsetPercentage(){return this.thumbs[0].percentage+(this.thumbs[1].percentage-this.thumbs[0].percentage)/2}_updateThumbs(){this.thumbs=this._createThumbs()}_renderThumb(t){if(this.showThumb)return e("as-range-slider-thumb",{value:t.value,valueMin:t.valueMin,valueMax:t.valueMax,percentage:t.percentage,disabled:this.disabled,formatValue:this.formatValue,showCaption:this._shouldShowCaption(),onThumbMove:s=>this._onThumbMove(t,s.detail),onThumbIncrease:()=>this._onKeyboardThumbMove(t,1),onThumbDecrease:()=>this._onKeyboardThumbMove(t,-1),onThumbChangeStart:()=>this._emitChangeIn(this.changeStart),onThumbChangeEnd:()=>this._emitChangeIn(this.changeEnd),onThumbRender:()=>this.checkThumbCollision()})}_renderRangeBar(){const[t,s]=this._getCurrentThumbPercentages();return e("as-range-slider-bar",{rangeStartPercentage:t,rangeEndPercentage:s,isDraggable:(this.isDraggable||this.draggable)&&void 0!==this.range,disabled:this.disabled,stepPercentage:this._getStepPercentage(),onBarChangeStart:()=>this._emitChangeIn(this.changeStart),onBarChangeEnd:()=>this._emitChangeIn(this.changeEnd),onBarMove:t=>this._onBarMove(t)})}_renderCollapsedLabel(){if(2!==this.thumbs.length)return;const t=this.formatValue||(t=>t),s=this._getLabelOffsetPercentage(),i=this.thumbs[0].percentage<50;return e("div",{class:{"as-caption":!0,"as-font-medium":!0,"as-range-slider__rail-label":!0,"as-range-slider__rail-label--active":this.areLabelsColliding,"as-range-slider__rail-label__overflow--left":this.isLeftLabelOverflowing&&i,"as-range-slider__rail-label__overflow--right":this.isRightLabelOverflowing&&!i},style:{left:`${s}%`}},t(this.thumbs[0].value),e("span",{class:"as-range-slider__label-separator"},"â€”"),t(this.thumbs[1].value))}_getCurrentThumbPercentages(){return[this._sliderHasRange()?this.thumbs[0].percentage:0,this.thumbs[this.thumbs.length-1].percentage]}_shouldShowCaption(){return!this.areLabelsColliding&&this.showThumbCaption}_validateValues(){this.value?this.validateValue(this.value):this.range&&this.validateRange(this.range)}_createThumbs(){if(!this.range||!this.range.length)return[this._getThumbData(this.value)];const t=this.range.map(t=>this._getThumbData(t));return this._clampThumbValues(t),t}_getThumbData(t){return{percentage:this._isBetweenValidValues(t)?this._getPercentage(t):this._getPercentage(this.minValue),value:this._isBetweenValidValues(t)?t:this.minValue,valueMax:this.maxValue,valueMin:this.minValue}}_isBetweenValidValues(t){return t>=this.minValue&&t<=this.maxValue}_sliderHasRange(){return this.range&&2===this.range.length}_onKeyboardThumbMove(t,s){const e=this._getPercentage(t.value+s*this.step);e<0||e>100||this._onThumbMove(t,e)}_onThumbMove(t,s){const[e,i]=this.thumbs,h=e===t,a=i===t,r=this._getValueFromPercentage(s),n=this._getStepValue(r),l=this._getPercentage(n);let o=this.minValue,u=this.maxValue;this._sliderHasRange()&&h&&(u=i.value-this.step)<n||this._sliderHasRange()&&a&&(o=e.value+this.step)>n||(t.value=n,t.valueMin=o,t.valueMax=u,t.percentage=l,this.thumbs=[...this.thumbs],this._emitChangeIn(this.change))}_onBarMove(t){const s=t.detail.map(t=>this._getValueFromPercentage(t)).map(t=>this._getStepValue(t)).map(t=>({percentage:this._getPercentage(t),value:t}));this._clampThumbValues(s),this.thumbs=[...s],this._emitChangeIn(this.change)}_emitChangeIn(t){const s=this.thumbs.map(t=>t.value);return t.emit(s)}_getPercentage(t){return(t-this.minValue)/(this.maxValue-this.minValue)*100}_getValueFromPercentage(t){return t*(this.maxValue-this.minValue)/100+this.minValue}_getStepPercentage(){return 100*this.step/(this.maxValue-this.minValue)}_clampThumbValues(t){const[s,e]=t;s.valueMin=this.minValue,s.valueMax=Math.min(e.value-this.step,this.maxValue),e.valueMin=Math.max(this.minValue,s.value+this.step),e.valueMax=this.maxValue}_getStepValue(t){const s=Math.max(this.minValue,Math.round(t/this.step)*this.step);return this.roundToStep(s,this.step)}roundToStep(t,s){return Number.parseFloat(t.toFixed(function(t){let s=0;for(;e=t*10**s,Math.abs(Math.round(e)-e)>1e-10&&isFinite(10**s);)s++;var e;return s}(s)))}_checkLabelOverflow(){const t=this.element.querySelectorAll("as-range-slider-thumb .as-range-slider__value");if(t){const{overflow:s}=this.checkOverflowInParentContainer(t[0]),{overflow:e}=t.length>1?this.checkOverflowInParentContainer(t[1]):{overflow:!1};this.isLeftLabelOverflowing=s,this.isRightLabelOverflowing=e}}checkThumbCollision(){const t=this.element.querySelectorAll("as-range-slider-thumb .as-range-slider__value");if(!t||2!==t.length)return;const s=t[1],e=t[0].getBoundingClientRect(),i=s.getBoundingClientRect();var h,a;this.areLabelsColliding=(8,!((h=e).y+h.height<(a=i).y||h.y>a.y+a.height||h.x+h.width+8<a.x||h.x>a.x+a.width+8))}checkOverflowInParentContainer(t){if(t){const s=this.element.parentElement.getBoundingClientRect(),e=t.getBoundingClientRect(),i=s.left>e.left,h=s.right<e.left+e.width;return{left:i,overflow:i||h,right:h}}return{left:!1,overflow:!1,right:!1}}get element(){return i(this)}static get watchers(){return{value:["validateValue"],range:["validateRange"]}}static get style(){return"as-range-slider{--as--range-slider--rail-color:var(--as--color--ui-03,#e2e6e3);--as--range-slider--range-color:var(--as--color--primary,#1785fb);display:block;height:32px}as-range-slider .as-range-slider--disabled{pointer-events:none}as-range-slider .as-range-slider__rail{display:-ms-flexbox;display:flex;position:relative;width:calc(100% - 12px);height:12px;margin:auto}as-range-slider .as-range-slider__rail:before{content:\" \";position:absolute;z-index:0;top:50%;left:0;width:100%;height:2px;-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);background-color:var(--as--range-slider--rail-color,#e2e6e3);pointer-events:none}as-range-slider .as-range-slider__rail-label{visibility:hidden;position:absolute;top:16px;-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0);white-space:nowrap}as-range-slider .as-range-slider__rail-label.as-range-slider__rail-label__overflow--left{-webkit-transform:translate3d(-6px,0,0);transform:translate3d(-6px,0,0)}as-range-slider .as-range-slider__rail-label.as-range-slider__rail-label__overflow--right{-webkit-transform:translate3d(calc(-100% + 6px),0,0);transform:translate3d(calc(-100% + 6px),0,0)}as-range-slider .as-range-slider__rail-label .as-range-slider__label-separator{display:inline-block;width:8px;-webkit-transition:opacity .2s ease-in;transition:opacity .2s ease-in;opacity:0;text-align:center}as-range-slider .as-range-slider__rail-label.as-range-slider__rail-label--active{visibility:visible}as-range-slider .as-range-slider__rail-label.as-range-slider__rail-label--active .as-range-slider__label-separator{opacity:1}"}};export{h as as_range_slider};