var __awaiter=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))(function(a,n){function s(t){try{h(r.next(t))}catch(t){n(t)}}function o(t){try{h(r["throw"](t))}catch(t){n(t)}}function h(t){t.done?a(t.value):new i(function(e){e(t.value)}).then(s,o)}h((r=r.apply(t,e||[])).next())})};var __generator=this&&this.__generator||function(t,e){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,a,n,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(e){return h([t,e])}}function h(s){if(r)throw new TypeError("Generator is already executing.");while(i)try{if(r=1,a&&(n=s[0]&2?a["return"]:s[0]?a["throw"]||((n=a["return"])&&n.call(a),0):a.next)&&!(n=n.call(a,s[1])).done)return n;if(a=0,n)s=[s[0]&2,n.value];switch(s[0]){case 0:case 1:n=s;break;case 4:i.label++;return{value:s[1],done:false};case 5:i.label++;a=s[1];s=[0];continue;case 7:s=i.ops.pop();i.trys.pop();continue;default:if(!(n=i.trys,n=n.length>0&&n[n.length-1])&&(s[0]===6||s[0]===2)){i=0;continue}if(s[0]===3&&(!n||s[1]>n[0]&&s[1]<n[3])){i.label=s[1];break}if(s[0]===6&&i.label<n[1]){i.label=n[1];n=s;break}if(n&&i.label<n[2]){i.label=n[2];i.ops.push(s);break}if(n[2])i.ops.pop();i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t];a=0}finally{r=n=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};System.register(["./p-634af494.system.js","./p-1b6f8cba.system.js","./p-1cb668fb.system.js","./p-feaef0ea.system.js"],function(t){"use strict";var e,i,r,a,n,s,o,h,l,c,u,d,p,f;return{setters:[function(t){e=t.r;i=t.c;r=t.h;a=t.H},function(t){n=t.i},function(t){s=t.t;o=t.u;h=t.l;l=t.e},function(t){c=t.D;u=t.a;d=t.A;p=t.b;f=t.c}],execute:function(){function m(t,e){if(t.length!==e.length){return false}for(var i=0;i<t.length;i++){if(t[i].start!==e[i].start||t[i].end!==e[i].end||t[i].value!==e[i].value||t[i].color!==e[i].color){return false}}return true}var g=6;var y=t("as_time_series_widget",function(){function t(t){e(this,t);this.showHeader=true;this.disableInteractivity=false;this.data=[];this.backgroundData=[];this.color=c;this.unselectedColor=u;this.isLoading=false;this.error="";this.errorDescription="";this.noDataHeaderMessage="NO DATA AVAILABLE";this.noDataBodyMessage="There is no data to display.";this.responsive=true;this.progress=0;this.playing=false;this.animated=false;this.timeFormat=d;this.clearText="Clear selection";this.range=null;this.disableAnimation=false;this.xAxisOptions={};this.yAxisOptions={};this.axisFormatter=this.axisFormatter.bind(this);this.play=i(this,"play",7);this.pause=i(this,"pause",7);this.selectionChanged=i(this,"selectionChanged",7);this.seek=i(this,"seek",7)}t.prototype.onDataChanged=function(t,e){if(m(t,e)){return}else{this.timeFormat=this.timeFormat===d?typeof this.data[0].start==="number"?p:f:this.timeFormat}};t.prototype.onBackgroundDataChanged=function(t){this._backgroundData=t};t.prototype.onProgressChanged=function(){this._render()};t.prototype.onTimeFormatChanged=function(t){this._formatter=s(t);if(this.histogram){this.histogram.forceUpdate()}};t.prototype.onTimeFormatLocaleChanged=function(t){try{o(t);if(this.timeFormat){this.onTimeFormatChanged(this.timeFormat)}}catch(t){throw new Error("Invalid time format.")}};t.prototype.defaultFormatter=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.histogram.defaultFormatter(t)]})})};t.prototype.getSelection=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.histogram.getSelection()]})})};t.prototype.setSelection=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){this.histogram.setSelection(t);return[2]})})};t.prototype.clearSelection=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){this.histogram.clearSelection();return[2]})})};t.prototype.xFormatter=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,this.histogram.xFormatter(t)]})})};t.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){this.onDataChanged(this.data,[]);this.onBackgroundDataChanged(this.backgroundData);return[2]})})};t.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,function(){var t;var e=this;return __generator(this,function(i){switch(i.label){case 0:if(this.timeFormatLocale){o(this.timeFormatLocale)}this._formatter=s(this.timeFormat);this.histogram.addEventListener("selectionInput",function(t){if(t.detail===null){e._selection=null}else{e._selection=t.detail.selection}e._render()});this.histogram.addEventListener("selectionChanged",function(t){t.stopPropagation();if(t.detail===null){e.selectionChanged.emit(null);return}var i=t.detail.selection;e.selectionChanged.emit(i);e._render()});this.histogram.addEventListener("drawParametersChanged",function(t){e._renderOptions=t.detail;e._render()});t=this;return[4,this.histogram.getSelection()];case 1:t._selection=i.sent();return[2]}})})};t.prototype.render=function(){var t=this;var e={"as-time-series--animated":this.animated};return r(a,{class:e},this._renderButton(),r("as-histogram-widget",{ref:function(e){t.histogram=e},heading:this.heading,description:this.description,showHeader:this.showHeader,showClear:this.showClear,disableInteractivity:this.disableInteractivity,data:this.data,backgroundData:this._backgroundData,color:this.color,unselectedColor:this.unselectedColor,colorRange:this.colorRange,axisFormatter:this.axisFormatter,tooltipFormatter:this.tooltipFormatter||this._tooltipFormatter.bind(this),xLabel:this.xLabel,yLabel:this.yLabel,isLoading:this.isLoading,error:this.error,errorDescription:this.errorDescription,noDataHeaderMessage:this.noDataHeaderMessage,noDataBodyMessage:this.noDataBodyMessage,responsive:this.responsive,clearText:this.clearText,range:this.range,disableAnimation:this.disableAnimation,xAxisOptions:this.xAxisOptions,yAxisOptions:this.yAxisOptions}))};t.prototype.axisFormatter=function(t){return this._formatter(t)};t.prototype._tooltipFormatter=function(t){return[this.axisFormatter(t.start)+" - "+this.axisFormatter(t.end),""+t.value]};t.prototype._renderButton=function(){if(!this.animated){return null}var t={"as-time-series--play-button":true,"as-time-series--play-button-hidden":!this.data.length||this.isLoading||!!this.error,"as-time-series--play-button-x-label":!!this.xLabel};return r("div",{class:t,onClick:this._playPauseClick.bind(this)},n(this.playing?"PAUSE":"PLAY","var(--as--color--primary)",{width:"32px",height:"32px"}))};t.prototype._playPauseClick=function(){this.playing?this.pause.emit():this.play.emit()};t.prototype._render=function(){var t=this;if(!this._renderOptions){return}var e=this._renderOptions,i=e.container,r=e.height,a=e.width,n=e.padding,s=e.xScale,o=e.binsScale,c=e.handleWidth;var u=i.select(".as-time-series--g");if(!this.animated){if(!u.empty()){u.remove()}return}var d=i.node().getBoundingClientRect().left;var p=n[0],f=n[1];var m=h().domain([0,100]);var y=0;if(this._selection){var _=this._selection.map(function(t){return s(o(t))});y=c/2;m.range([_[0]+y+g/2,_[1]-y-g/2])}else{m.range([0,a-p])}var v=m(this.progress);i.on("click",function(){var e=l;var i=Math.round(m.invert(e.clientX-d-p+8));if(i>100||i<0){return}t.seek.emit(i)});if(u.empty()){u=i.append("g").attr("class","as-time-series--g");u.append("line").attr("class","as-time-series--preview").attr("stroke-width",4).attr("stroke","gray").attr("opacity","0");u.append("line").attr("class","as-time-series--line").attr("stroke-width",4);u.append("circle").attr("class","as-time-series--scrubber").attr("r",g).attr("stroke-width",0);u.append("line").attr("class","as-time-series--track").attr("stroke-width",16).attr("stroke","black").attr("opacity","0").on("mouseleave",function(){t._lastMousePosition=-1;u.select(".as-time-series--preview").attr("opacity","0")})}u.select(".as-time-series--line").attr("x1",m(0)-g/2).attr("x2",v).attr("y1",r-f).attr("y2",r-f);u.select(".as-time-series--track").attr("y1",r-f).attr("y2",r-f).attr("x1",m(0)+y).attr("x2",m(100)-y).on("mousemove",function(){var e=l;t._lastMousePosition=e.clientX-d-p+8;if(t._lastMousePosition>m(t.progress)){u.select(".as-time-series--preview").attr("x2",t._lastMousePosition).attr("opacity","1")}});u.select(".as-time-series--preview").attr("x1",v-g/2).attr("y1",r-f).attr("y2",r-f).attr("opacity",function(){if(t._lastMousePosition>v){return"1"}return"0"});u.select(".as-time-series--scrubber").attr("transform","translate("+(v-g/2)+","+(r-f)+")")};Object.defineProperty(t,"watchers",{get:function(){return{data:["onDataChanged"],backgroundData:["onBackgroundDataChanged"],progress:["onProgressChanged"],timeFormat:["onTimeFormatChanged"],timeFormatLocale:["onTimeFormatLocaleChanged"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return"as-time-series-widget{--as--time-series--line-color:var(--as--color--primary,#1785fb);--as-histogram-widget--background-color:var(--as--color--ui-01);display:-ms-flexbox;display:flex;-ms-flex-align:end;align-items:flex-end;height:100%;background:var(--as-histogram-widget--background-color,#fff)}as-time-series-widget as-histogram-widget{overflow:unset}as-time-series-widget.as-time-series--animated as-histogram-widget .content,as-time-series-widget.as-time-series--animated as-histogram-widget as-widget-header,as-time-series-widget.as-time-series--animated as-histogram-widget as-widget-selection{margin-left:-32px}as-time-series-widget .as-time-series--play-button{margin-bottom:2px;cursor:pointer}as-time-series-widget .as-time-series--play-button-hidden{opacity:0}as-time-series-widget .as-time-series--play-button-x-label{margin-bottom:27px}as-time-series-widget .as-time-series--line,as-time-series-widget .as-time-series--scrubber{stroke:var(--as--time-series--line-color);fill:var(--as--time-series--line-color)}as-time-series-widget .as-time-series--line,as-time-series-widget .as-time-series--scrubber,as-time-series-widget .as-time-series--track{cursor:pointer}"},enumerable:true,configurable:true});return t}())}}});