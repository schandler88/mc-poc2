/*!
 * CARTO VL js https://carto.com/
 * Version: 0.9.0
 * 
 */!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=39)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(e)}t.exports=r},function(t,e,r){var n=r(25),i=r(26),o=r(27);t.exports=function(t){return n(t)||i(t)||o()}},function(t,e,r){var n=r(36),i=r(37),o=r(38);t.exports=function(t,e){return n(t)||i(t,e)||o()}},function(t,e,r){var n=r(8),i=r(33);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}},function(t,e,r){var n=r(10);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e,r){t.exports=r(28)},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=n=function(t){return r(t)}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},n(e)}t.exports=n},function(t,e){function r(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function u(t){r(a,i,o,u,s,"next",t)}function s(t){r(a,i,o,u,s,"throw",t)}u(void 0)})}}},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(e,n)}t.exports=r},function(t,e,r){"use strict";var n=r(12);function i(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(o,this,e),this.length=this._features.length}function o(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){var e=null,r=t.readVarint()+t.pos;for(;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}t.exports=i,i.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new n(this._pbf,e,this.extent,this._keys,this._values)}},function(t,e,r){"use strict";var n=r(31);function i(t,e,r,n,i){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=i,t.readFields(o,this,e)}function o(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){var r=t.readVarint()+t.pos;for(;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function a(t){for(var e,r,n=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n+=((r=t[a]).x-e.x)*(e.y+r.y);return n}t.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,i=1,o=0,a=0,u=0,s=[];t.pos<r;){if(o<=0){var c=t.readVarint();i=7&c,o=c>>3}if(o--,1===i||2===i)a+=t.readSVarint(),u+=t.readSVarint(),1===i&&(e&&s.push(e),e=[]),e.push(new n(a,u));else{if(7!==i)throw new Error("unknown command "+i);e&&e.push(e[0].clone())}}return e&&s.push(e),s},i.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,a=1/0,u=-1/0,s=1/0,c=-1/0;t.pos<e;){if(n<=0){var f=t.readVarint();r=7&f,n=f>>3}if(n--,1===r||2===r)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>u&&(u=i),o<s&&(s=o),o>c&&(c=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,s,u,c]},i.prototype.toGeoJSON=function(t,e,r){var n,o,u=this.extent*Math.pow(2,r),s=this.extent*t,c=this.extent*e,f=this.loadGeometry(),h=i.types[this.type];function l(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+c)/u;t[e]=[360*(r.x+s)/u-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<f.length;n++)p[n]=f[n][0];l(f=p);break;case 2:for(n=0;n<f.length;n++)l(f[n]);break;case 3:for(f=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var u=a(t[o]);0!==u&&(void 0===n&&(n=u<0),n===u<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}r&&i.push(r);return i}(f),n=0;n<f.length;n++)for(o=0;o<f[n].length;o++)l(f[n][o])}1===f.length?f=f[0]:h="Multi"+h;var y={type:"Feature",geometry:{type:h,coordinates:f},properties:this.properties};return"id"in this&&(y.id=this.id),y}},function(t,e,r){t.exports.VectorTile=r(30),t.exports.VectorTileFeature=r(12),t.exports.VectorTileLayer=r(11)},function(t,e,r){"use strict";t.exports=i;var n=r(32);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;function o(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function s(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function l(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function x(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function g(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function m(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=x(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=m(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=x(this.buf,this.pos)+4294967296*x(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=x(this.buf,this.pos)+4294967296*m(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return a(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return a(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,r){var n="",i=e;for(;i<r;){var o,a,u,s=t[i],c=null,f=s>239?4:s>223?3:s>191?2:1;if(i+f>r)break;1===f?s<128&&(c=s):2===f?128==(192&(o=t[i+1]))&&(c=(31&s)<<6|63&o)<=127&&(c=null):3===f?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((c=(15&s)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===f&&(o=t[i+1],a=t[i+2],u=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&u)&&((c=(15&s)<<18|(63&o)<<12|(63&a)<<6|63&u)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,f=1):c>65535&&(c-=65536,n+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),n+=String.fromCharCode(c),i+=f}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var r=o(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&u(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&u(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){this.writeMessage(t,c,e)},writePackedBoolean:function(t,e){this.writeMessage(t,l,e)},writePackedFloat:function(t,e){this.writeMessage(t,f,e)},writePackedDouble:function(t,e){this.writeMessage(t,h,e)},writePackedFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,y,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,r){var n=r(1),i=r(10),o=r(34),a=r(35);function u(e){var r="function"==typeof Map?new Map:void 0;return t.exports=u=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,e)}function e(){return a(t,arguments,n(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},u(e)}t.exports=u},function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n,u,s,c,f,p,d,v=e&&e.length,x=v?e[0]*r:t.length,g=i(t,0,x,r,!0),m=[];if(!g)return m;if(v&&(g=function(t,e,r,n){var a,u,s,c,f,p=[];for(a=0,u=e.length;a<u;a++)s=e[a]*n,c=a<u-1?e[a+1]*n:t.length,(f=i(t,s,c,n,!1))===f.next&&(f.steiner=!0),p.push(y(f));for(p.sort(h),a=0;a<p.length;a++)l(p[a],r),r=o(r,r.next);return r}(t,e,g,r)),t.length>80*r){n=s=t[0],u=c=t[1];for(var w=r;w<x;w+=r)f=t[w],p=t[w+1],f<n&&(n=f),p<u&&(u=p),f>s&&(s=f),p>c&&(c=p);d=0!==(d=Math.max(s-n,c-u))?1/d:0}return a(g,m,r,n,u,d),m}function i(t,e,r,n,i){var o,a;if(i===T(t,e,r,n)>0)for(o=e;o<r;o+=n)a=M(o,t[o],t[o+1],a);else for(o=r-n;o>=e;o-=n)a=M(o,t[o],t[o+1],a);return a&&g(a,a.next)&&(_(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!g(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(_(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function a(t,e,r,n,i,h,l){if(t){!l&&h&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=p(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,a,u,s,c=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(i=r,r=r.nextZ,u--):(i=n,n=n.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,c*=2}while(a>1)}(i)}(t,n,i,h);for(var y,d,v=t;t.prev!==t.next;)if(y=t.prev,d=t.next,h?s(t,n,i,h):u(t))e.push(y.i/r),e.push(t.i/r),e.push(d.i/r),_(t),t=d.next,v=d.next;else if((t=d)===v){l?1===l?a(t=c(t,e,r),e,r,n,i,h,2):2===l&&f(t,e,r,n,i,h):a(o(t),e,r,n,i,h,1);break}}}function u(t){var e=t.prev,r=t,n=t.next;if(x(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(d(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(t,e,r,n){var i=t.prev,o=t,a=t.next;if(x(i,o,a)>=0)return!1;for(var u=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,s=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,f=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=p(u,s,e,r,n),l=p(c,f,e,r,n),y=t.prevZ,v=t.nextZ;y&&y.z>=h&&v&&v.z<=l;){if(y!==t.prev&&y!==t.next&&d(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&x(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,v!==t.prev&&v!==t.next&&d(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&x(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;y&&y.z>=h;){if(y!==t.prev&&y!==t.next&&d(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&x(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;v&&v.z<=l;){if(v!==t.prev&&v!==t.next&&d(i.x,i.y,o.x,o.y,a.x,a.y,v.x,v.y)&&x(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function c(t,e,r){var n=t;do{var i=n.prev,o=n.next.next;!g(i,o)&&m(i,n,n.next,o)&&w(i,o)&&w(o,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(o.i/r),_(n),_(n.next),n=t=o),n=n.next}while(n!==t);return n}function f(t,e,r,n,i,u){var s=t;do{for(var c=s.next.next;c!==s.prev;){if(s.i!==c.i&&v(s,c)){var f=b(s,c);return s=o(s,s.next),f=o(f,f.next),a(s,e,r,n,i,u),void a(f,e,r,n,i,u)}c=c.next}s=s.next}while(s!==t)}function h(t,e){return t.x-e.x}function l(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var u=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=i&&u>a){if(a=u,u===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===a)return r.prev;var s,c=r,f=r.x,h=r.y,l=1/0;n=r.next;for(;n!==c;)i>=n.x&&n.x>=f&&i!==n.x&&d(o<h?i:a,o,f,h,o<h?a:i,o,n.x,n.y)&&((s=Math.abs(o-n.y)/(i-n.x))<l||s===l&&n.x>r.x)&&w(n,t)&&(r=n,l=s),n=n.next;return r}(t,e)){var r=b(e,t);o(r,r.next)}}function p(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function y(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function d(t,e,r,n,i,o,a,u){return(i-a)*(e-u)-(t-a)*(o-u)>=0&&(t-a)*(n-u)-(r-a)*(e-u)>=0&&(r-a)*(o-u)-(i-a)*(n-u)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&m(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&w(t,e)&&w(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function x(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,r,n){return!!(g(t,e)&&g(r,n)||g(t,n)&&g(r,e))||x(t,e,r)>0!=x(t,e,n)>0&&x(r,n,t)>0!=x(r,n,e)>0}function w(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function b(t,e){var r=new F(t.i,t.x,t.y),n=new F(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function M(t,e,r,n){var i=new F(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function _(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function F(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,r,n){for(var i=0,o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=n,t.exports.default=n,n.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,a=Math.abs(T(t,0,o,r));if(i)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;a-=Math.abs(T(t,c,f,r))}var h=0;for(u=0;u<n.length;u+=3){var l=n[u]*r,p=n[u+1]*r,y=n[u+2]*r;h+=Math.abs((t[l]-t[y])*(t[p+1]-t[l+1])-(t[l]-t[p])*(t[y+1]-t[l+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[i][o][a]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},,,,,,,,,function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(29),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",c="object"==typeof t,f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=w;var h="suspendedStart",l="suspendedYield",p="executing",y="completed",d={},v={};v[a]=function(){return this};var x=Object.getPrototypeOf,g=x&&x(x(E([])));g&&g!==n&&i.call(g,a)&&(v=g);var m=F.prototype=M.prototype=Object.create(v);_.prototype=m.constructor=F,F.constructor=_,F[s]=_.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,F):(t.__proto__=F,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(m),t},f.awrap=function(t){return{__await:t}},T(V.prototype),V.prototype[u]=function(){return this},f.AsyncIterator=V,f.async=function(t,e,r,n){var i=new V(w(t,e,r,n));return f.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},T(m),m[s]="Generator",m[a]=function(){return this},m.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=E,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return u.type="throw",u.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;P(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}}}function w(t,e,r,n){var i=e&&e.prototype instanceof M?e:M,o=Object.create(i.prototype),a=new A(n||[]);return o._invoke=function(t,e,r){var n=h;return function(i,o){if(n===p)throw new Error("Generator is already running");if(n===y){if("throw"===i)throw o;return N()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=S(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var s=b(t,e,r);if("normal"===s.type){if(n=r.done?y:l,s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=y,r.method="throw",r.arg=s.arg)}}}(t,r,a),o}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function M(){}function _(){}function F(){}function T(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function V(t){var e;this._invoke=function(r,n){function o(){return new Promise(function(e,o){!function e(r,n,o,a){var u=b(t[r],t,n);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){s.value=t,o(s)},function(t){return e("throw",t,o,a)})}a(u.arg)}(r,n,e,o)})}return e=e?e.then(o,o):o()}}function S(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,S(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=b(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,d;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:N}}function N(){return{value:r,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,e,r){"use strict";var n=r(11);function i(t,e,r){if(3===t){var i=new n(r,r.readVarint()+r.pos);i.length&&(e[i.name]=i)}}t.exports=function(t,e){this.layers=t.readFields(i,{},e)}},function(t,e,r){"use strict";function n(t,e){this.x=t,this.y=e}t.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}},function(t,e){e.read=function(t,e,r,n,i){var o,a,u=8*i-n-1,s=(1<<u)-1,c=s>>1,f=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-f)-1,p>>=-f,f+=u;f>0;o=256*o+t[e+h],h+=l,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+t[e+h],h+=l,f-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,u,s,c=8*o-i-1,f=(1<<c)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+h>=1?l/s:l*Math.pow(2,1-h))*s>=2&&(a++,s/=2),a+h>=f?(u=0,a=f):a+h>=1?(u=(e*s-1)*Math.pow(2,i),a+=h):(u=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&u,p+=y,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;t[r+p]=255&a,p+=y,a/=256,c-=8);t[r+p-y]|=128*d}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,r){var n=r(10);function i(e,r,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?t.exports=i=function(t,e,r){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return r&&n(o,r.prototype),o}:t.exports=i=Reflect.construct,i.apply(null,arguments)}t.exports=i},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"create",function(){return F}),r.d(n,"clone",function(){return T}),r.d(n,"fromValues",function(){return V}),r.d(n,"copy",function(){return S}),r.d(n,"set",function(){return k}),r.d(n,"add",function(){return P}),r.d(n,"subtract",function(){return A}),r.d(n,"multiply",function(){return E}),r.d(n,"divide",function(){return N}),r.d(n,"ceil",function(){return O}),r.d(n,"floor",function(){return I}),r.d(n,"min",function(){return B}),r.d(n,"max",function(){return L}),r.d(n,"round",function(){return j}),r.d(n,"scale",function(){return D}),r.d(n,"scaleAndAdd",function(){return Z}),r.d(n,"distance",function(){return G}),r.d(n,"squaredDistance",function(){return C}),r.d(n,"length",function(){return R}),r.d(n,"squaredLength",function(){return q}),r.d(n,"negate",function(){return z}),r.d(n,"inverse",function(){return U}),r.d(n,"normalize",function(){return W}),r.d(n,"dot",function(){return Y}),r.d(n,"lerp",function(){return J}),r.d(n,"random",function(){return K}),r.d(n,"transformMat4",function(){return Q}),r.d(n,"transformQuat",function(){return H}),r.d(n,"str",function(){return X}),r.d(n,"exactEquals",function(){return $}),r.d(n,"equals",function(){return tt}),r.d(n,"sub",function(){return et}),r.d(n,"mul",function(){return rt}),r.d(n,"div",function(){return nt}),r.d(n,"dist",function(){return it}),r.d(n,"sqrDist",function(){return ot}),r.d(n,"len",function(){return at}),r.d(n,"sqrLen",function(){return ut}),r.d(n,"forEach",function(){return st});var i=r(8),o=r.n(i),a=r(2),u=r.n(a),s=r(6),c=r.n(s),f=r(9),h=r.n(f),l=r(0),p=r.n(l),y=r(7),d=r.n(y),v=r(13),x=r(14),g=r(3),m=r.n(g);function w(t,e,r){return{center:{x:(t+.5)/Math.pow(2,r)*2-1,y:2*(1-(e+.5)/Math.pow(2,r))-1},scale:1/Math.pow(2,r)}}var b=1e-6,M="undefined"!=typeof Float32Array?Float32Array:Array,_=Math.random;Math.PI;function F(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function T(t){var e=new M(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function V(t,e,r,n){var i=new M(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function S(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function k(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function P(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function A(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function E(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function N(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function O(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function I(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function B(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function L(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function j(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function D(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Z(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function G(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)}function C(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}function R(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}function q(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function z(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function U(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function W(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t}function Y(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function J(t,e,r,n){var i=e[0],o=e[1],a=e[2],u=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=u+n*(r[3]-u),t}function K(t,e){var r,n,i,o,a,u;e=e||1;do{a=(r=2*_()-1)*r+(n=2*_()-1)*n}while(a>=1);do{u=(i=2*_()-1)*i+(o=2*_()-1)*o}while(u>=1);var s=Math.sqrt((1-a)/u);return t[0]=e*r,t[1]=e*n,t[2]=e*i*s,t[3]=e*o*s,t}function Q(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}function H(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2],c=r[3],f=c*n+u*o-s*i,h=c*i+s*n-a*o,l=c*o+a*i-u*n,p=-a*n-u*i-s*o;return t[0]=f*c+p*-a+h*-s-l*-u,t[1]=h*c+p*-u+l*-a-f*-s,t[2]=l*c+p*-s+f*-u-h*-a,t[3]=e[3],t}function X(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function $(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function tt(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(r-a)<=b*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-u)<=b*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-s)<=b*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=b*Math.max(1,Math.abs(o),Math.abs(c))}var et=A,rt=E,nt=N,it=G,ot=C,at=R,ut=q,st=function(){var t=F();return function(e,r,n,i,o,a){var u=void 0,s=void 0;for(r||(r=4),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,u=n;u<s;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function ct(t,e){var r=m()(t,2),n=r[0],i=r[1],o=m()(e,2);return[n-o[0],i-o[1]]}function ft(t,e){var r=m()(t,2),n=r[0],i=r[1],o=m()(e,2);return n*o[0]+i*o[1]}function ht(t){var e=m()(t,2),r=e[0];return[-e[1],r]}function lt(t,e){var r=function(t,e){var r=Math.hypot(t,e);return[t/r,e/r]}(t[0]-e[0],t[1]-e[1]);return[-r[1],r[0]]}function pt(t,e){var r=[t[1],-t[0]],n=[-e[1],e[0]],i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[0]+n[1]*r[1],a=Math.abs(i);return{turnLeft:i>0,joinNormal:!(a<.866&&o>.5)&&yt([(r[0]+n[0])/a,(r[1]+n[1])/a])}}function yt(t){return[-t[0],-t[1]]}function dt(t,e,r){return(t.x-r.x)*(e.y-r.y)-(e.x-r.x)*(t.y-r.y)}function vt(t,e){return t.x===e.x&&t.y===e.y}function xt(t,e,r){switch(r){case"line":return function(t,e){for(var r=t,n=t.length,i=0;i<n;i+=2)e.minx=Math.min(e.minx,r[i+0]),e.miny=Math.min(e.miny,r[i+1]),e.maxx=Math.max(e.maxx,r[i+0]),e.maxy=Math.max(e.maxy,r[i+1]);return e}(t,e);case"polygon":return function(t,e){for(var r=[t.flat,t.holes[0]||t.flat.length/2],n=r[0],i=r[1],o=0;o<i;o++)e.minx=Math.min(e.minx,n[2*o+0]),e.miny=Math.min(e.miny,n[2*o+1]),e.maxx=Math.max(e.maxx,n[2*o+0]),e.maxy=Math.max(e.maxy,n[2*o+1]);return e}(t,e)}}var gt={intersect:function(t,e,r,n){var i=t,o=r,a=ct(e,t),u=ct(n,r),s=ht(a),c=ht(u),f=ft(ct(o,i),c)/ft(a,c),h=ft(ct(i,o),s)/ft(u,s);if(f>=0&&f<=1&&h>=0&&h<=1)return[i[0]+f*a[0],i[1]+f*a[1]]},sub:ct,dot:ft,perpendicular:ht,getLineNormal:lt,getJoinNormal:pt,neg:yt,halfPlaneSign:dt,pointInTriangle:function(t,e,r,n){if(vt(e,r)||vt(r,n)||vt(n,e))return!1;var i=dt(t,e,r)<0,o=dt(t,r,n)<0,a=dt(t,n,e)<0;return i===o&&o===a},equalPoints:vt,pointInCircle:function(t,e,r){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i<=r*r},pointInRectangle:function(t,e){if(null===e)return!1;var r=t.x.toFixed(2),n=t.y.toFixed(2);return e.minx<=r&&r<=e.maxx&&e.miny<=n&&n<=e.maxy}},mt=function t(){p()(this,t),this.flat=[],this.holes=[],this.clipped=[],this.clippedType=[]};function wt(t,e){var r=[];return t.map(function(t){var n=[];t.map(function(t){n.push([2*t.x/e-1,2*(1-t.y/e)-1])}),r.push.apply(r,u()(function(t){var e=[],r=[];function n(t){for(var e=0,r=0;r<_t;r++)e|=Mt[r].inside(t)?0:1<<r;return e}function i(t,e,r){for(var i=0;i<_t;i++){var o=1<<i;if(r&o){var a=Mt[i].intersect(t,e);return r=n(a)&~o,[a,r]}}}for(var o=t[0],a=n(o),s=1;s<t.length;++s){for(var c=t[s],f=n(c),h=f,l=c;;){if(!(a|f)){var p,y;if((p=e).push.apply(p,u()(o)),f!==h)(y=e).push.apply(y,u()(c)),s<t.length-1&&(r.push(e),e=[]);else if(s===t.length-1){var d;(d=e).push.apply(d,u()(c))}break}if(a&f)break;if(a){var v=i(o,c,a),x=m()(v,2);o=x[0],a=x[1]}else{var g=i(o,c,f),w=m()(g,2);c=w[0],f=w[1]}}o=l,a=h}(e=function(t){for(var e,r,n=[],i=0;i<t.length;i+=2){var o=t[i],a=t[i+1];o===e&&a===r||(n.push(o,a),e=o,r=a)}return n}(e)).length>0&&r.push(e);return r}(n)))}),r}function bt(t,e){var r,n=null,i=[];return t.forEach(function(t){var o=function(t){for(var e=0,r=0;r<t.length;r++){var n=(r+1)%t.length;e+=t[r].x*t[n].y,e-=t[n].x*t[r].y}return e/2}(t);if(0!==o){void 0===r&&(r=o>0);var a=r?o>0:o<0,u=function(t,e){return t.map(function(t){var r=t.x,n=t.y;return[r=2*r/e-1,n=2*(1-n/e)-1]})}(t,e);a&&(n&&i.push(n),n=new mt),n=function(t,e,r){for(var n={},i=function(e){for(var r=[],i={},o=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=0;e>=0&&(o=n[e]||0),r>=0&&(o|=1<<r),o&&(i[t]=o)},a=0;a<t.length-1;a++){var u=t[a],s=t[a+1],c=Mt[e].inside(u),f=Mt[e].inside(s);if(c&&f)o(r.length,a+1),r.push(s);else if(c){var h=Mt[e].intersect(u,s);o(r.length,a+1,e),r.push(h)}else if(f){var l=Mt[e].intersect(u,s);o(r.length,a,e),r.push(l),o(r.length,a+1),r.push(s)}}r.length&&(i[0]&&(i[r.length]=i[0]),r.push(r[0])),t=r,n=i},o=0;o<_t;o++)i(o);t.length>=4&&(r&&e.holes.push(e.flat.length/2),t.forEach(function(t){e.flat.push(t[0],t[1])}),Object.keys(n).forEach(function(t){e.clipped.push(2*Number(t)),e.clippedType.push(n[t])}));return e}(u,n,!a)}}),n&&i.push(n),i}var Mt=[{inside:function(t){return t[0]<=1},intersect:function(t,e){return gt.intersect(t,e,[1,-100],[1,100])}},{inside:function(t){return t[1]<=1},intersect:function(t,e){return gt.intersect(t,e,[-100,1],[100,1])}},{inside:function(t){return t[0]>=-1},intersect:function(t,e){return gt.intersect(t,e,[-1,-100],[-1,100])}},{inside:function(t){return t[1]>=-1},intersect:function(t,e){return gt.intersect(t,e,[-100,-1],[100,-1])}}],_t=Mt.length;var Ft=function(){function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{properties:{}},n=r.properties,i=r.featureCount,o=r.sample,a=r.geomType,u=r.isAggregated,s=r.idProperty;p()(this,t),this.properties=n,this.featureCount=i,this.sample=o,this.geomType=a,this.isAggregated=u,this.idProperty=s||"cartodb_id",this.categoryToID=new Map,this.IDToCategory=new Map,this.numCategories=0,Object.values(n).map(function(t){t.categories=t.categories||[],t.categories.map(function(r){return e.categorizeString(t,r.name,!0)})}),this.propertyKeys=Object.keys(this.properties)}return d()(t,[{key:"categorizeString",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return void 0===e&&(e=null),this.categoryToID.has(e)?this.categoryToID.get(e):(r||this.properties[t].categories.push({name:e,frequency:Number.NaN}),this.categoryToID.set(e,this.numCategories),this.IDToCategory.set(this.numCategories,e),this.numCategories++,this.numCategories-1)}},{key:"propertyNames",value:function(t){var e=this.properties[t];return e.aggregations?Object.keys(e.aggregations).map(function(t){return e.aggregations[t]}):[t]}}]),t}();function Tt(t,e,r,n,i){var o,a,u,s,c,f;if(t.length>=4){if(s=lt(o=[t[0],t[1]],a=[t[2],t[3]]),o[0]===a[0]&&o[1]===a[1])return r;for(var h=4;h<=t.length;h+=2){if((f=!(i&&i(h)))&&(e.vertices[r]=o[0],e.normals[r++]=-s[0],e.vertices[r]=o[1],e.normals[r++]=-s[1],e.vertices[r]=o[0],e.normals[r++]=s[0],e.vertices[r]=o[1],e.normals[r++]=s[1],e.vertices[r]=a[0],e.normals[r++]=s[0],e.vertices[r]=a[1],e.normals[r++]=s[1],e.vertices[r]=o[0],e.normals[r++]=-s[0],e.vertices[r]=o[1],e.normals[r++]=-s[1],e.vertices[r]=a[0],e.normals[r++]=s[0],e.vertices[r]=a[1],e.normals[r++]=s[1],e.vertices[r]=a[0],e.normals[r++]=-s[0],e.vertices[r]=a[1],e.normals[r++]=-s[1]),h<=t.length-2?u=[t[h],t[h+1]]:n&&(u=[t[2],t[3]]),u){if(u[0]===a[0]&&u[1]===a[1])return r;if(c=lt(a,u),f){var l=pt(s,c),p=l.turnLeft,y=l.joinNormal,d=p?s:yt(c),v=p?c:yt(s);e.vertices[r]=a[0],e.normals[r++]=0,e.vertices[r]=a[1],e.normals[r++]=n?1e-37:0,e.vertices[r]=a[0],e.normals[r++]=d[0],e.vertices[r]=a[1],e.normals[r++]=d[1],e.vertices[r]=a[0],e.normals[r++]=v[0],e.vertices[r]=a[1],e.normals[r++]=v[1],y&&(e.vertices[r]=a[0],e.normals[r++]=y[0],e.vertices[r]=a[1],e.normals[r++]=y[1],e.vertices[r]=a[0],e.normals[r++]=v[0],e.vertices[r]=a[1],e.normals[r++]=v[1],e.vertices[r]=a[0],e.normals[r++]=d[0],e.vertices[r]=a[1],e.normals[r++]=d[1])}}o=a,a=u,s=c,u=null}}return r}function Vt(t,e){var r=new Float32Array(e);return r.set(t),r}var St=24,kt=0,Pt={vertices:new Float32Array(1048576),normals:new Float32Array(1048576)};function At(t){var e=kt+t;if(e>Pt.vertices.length){var r=2*e;Pt.vertices=Vt(Pt.vertices,r),Pt.normals=Vt(Pt.normals,r)}}var Et=r(16),Nt=2,Ot=24,It=0,Bt={vertices:new Float32Array(2097152),normals:new Float32Array(2097152)};function Lt(t){var e=It+t;if(e>Bt.vertices.length){var r=2*e;Bt.vertices=Vt(Bt.vertices,r),Bt.normals=Vt(Bt.normals,r)}}function jt(t,e){Bt.vertices[It]=t[e],Bt.normals[It++]=0,Bt.vertices[It]=t[e+1],Bt.normals[It++]=0}function Dt(t,e,r){return!!(t.clipped.includes(e)&&t.clipped.includes(r)&&t.clippedType[t.clipped.indexOf(e)]&t.clippedType[t.clipped.indexOf(r)])}var Zt=r(4),Gt=r.n(Zt),Ct=r(1),Rt=r.n(Ct),qt=r(5),zt=r.n(qt),Ut=r(15),Wt=function(t){function e(t){var r;if(p()(this,e),!t||!t.message)throw Error("Invalid CartoError, a message is mandatory");return(r=Gt()(this,Rt()(e).call(this,t.message))).name="CartoError",r.originalError=t,r}return zt()(e,t),e}(r.n(Ut)()(Error)),Yt=function(t){function e(t){var r;return p()(this,e),(r=Gt()(this,Rt()(e).call(this,{message:t}))).name="CartoRuntimeError",r}return zt()(e,t),e}(Wt),Jt={NOT_SUPPORTED:"[Not supported]:",WEB_GL:"[WebGL]:",MVT:"[MVT]:"};function Kt(t,e){switch(t){case"point":return function(t){return{verticesArrayBuffer:t,vertices:new Float32Array(t),breakpoints:[]}}(e);case"line":return function(t){var e=[],r=new Map;kt=0;for(var n=0;n<t.length;n++){for(var i=t[n],o=0;o<i.length;o++)At(St*i[o].length),kt=Tt(i[o],Pt,kt);r.set(e.length,0===e.length?{start:0,end:kt}:{start:r.get(e.length-1).end,end:kt}),e.push(kt)}for(var a=new ArrayBuffer(4*kt),u=new ArrayBuffer(4*kt),s=new Float32Array(a),c=new Float32Array(u),f=0;f<kt;f++)s[f]=Pt.vertices[f],c[f]=Pt.normals[f];return{vertices:s,normals:c,verticesArrayBuffer:a,normalsArrayBuffer:u,featureIDToVertexIndex:r,breakpoints:e}}(e);case"polygon":return function(t){var e=[],r=new Map;It=0;for(var n=0;n<t.length;n++){for(var i=t[n],o=function(t){var e=i[t],r=Et(e.flat,e.holes);Lt(Nt*r.length+Ot*e.flat.length);for(var n=0;n<r.length;n++)jt(e.flat,2*r[n]);It=Tt(e.flat,Bt,It,!0,function(t){return e.holes.includes((t-2)/2)||Dt(e,t-4,t-2)})},a=0;a<i.length;a++)o(a);r.set(e.length,0===e.length?{start:0,end:It}:{start:r.get(e.length-1).end,end:It}),e.push(It)}for(var u=new ArrayBuffer(4*It),s=new ArrayBuffer(4*It),c=new Float32Array(u),f=new Float32Array(s),h=0;h<It;h++)c[h]=Bt.vertices[h],f[h]=Bt.normals[h];return{vertices:c,normals:f,verticesArrayBuffer:u,normalsArrayBuffer:s,featureIDToVertexIndex:r,breakpoints:e}}(e);default:throw new Yt("".concat(Jt.NOT_SUPPORTED," Unimplemented geometry type: '").concat(t,"'."))}}var Qt=function t(e){var r=e.center,n=e.scale,i=e.geom,o=e.properties,a=e.type,u=e.active,s=e.size,c=e.metadata;p()(this,t),this.active=u,this.center=r,this.properties=o,this.scale=n,this.type=a,this.decodedGeom=Kt(a,i),this.numVertex="point"===a?3*s:this.decodedGeom.vertices.length/2,this.numFeatures="point"===a?s:this.decodedGeom.breakpoints.length||this.numVertex,this.propertyTex=[],this.metadata=c,this.propertyCount=0,this._aabb=function(t,e){switch(e){case"point":return[];case"line":case"polygon":for(var r=[],n=0;n<t.length;n++){for(var i=t[n],o={minx:Number.POSITIVE_INFINITY,miny:Number.POSITIVE_INFINITY,maxx:Number.NEGATIVE_INFINITY,maxy:Number.NEGATIVE_INFINITY},a=0;a<i.length;a++)o=xt(i[a],o,e);o.minx===Number.POSITIVE_INFINITY&&(o=null),r.push(o)}return r}}(i,a),this.t1=[.1,.1,.1,.1],this.t2=[.1,.1,.1,.1],this.t3=[.1,.1,.1,.1],this.t4=[.1,.1,.1,.1]},Ht=function(t){function e(t){var r;return p()(this,e),(r=Gt()(this,Rt()(e).call(this,{message:t}))).name="CartoValidationError",r}return zt()(e,t),e}(Wt),Xt="[Missing required property]:",$t="[Property with an incorrect type]:",te=1,ee=2,re=3,ne="point",ie="line",oe="polygon",ae={1:ne,2:ie,3:oe},ue=function(){function t(){p()(this,t)}return d()(t,[{key:"onmessage",value:function(t){var e=this;this.processEvent(t).then(function(t){var r=[];t.dataframe.empty||(r.push(e._propertiesArrayBuffer),r.push(t.dataframe.decodedGeom.verticesArrayBuffer),t.dataframe.decodedGeom.normalsArrayBuffer&&r.push(t.dataframe.decodedGeom.normalsArrayBuffer)),postMessage(t,r)})}},{key:"processEvent",value:function(){var t=h()(c.a.mark(function t(e){var r,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e.data).metadata&&(Object.setPrototypeOf(r.metadata,Ft.prototype),this.metadata=r.metadata),t.next=4,this._requestDataframe(r.x,r.y,r.z,r.url,r.layerID,this.metadata);case 4:return n=t.sent,t.abrupt("return",{mID:r.mID,dataframe:n});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_requestDataframe",value:function(){var t=h()(c.a.mark(function t(e,r,n,i,o,a){var u,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(i);case 2:return u=t.sent,t.next=5,this.urlToDataframeTransformer(u,e,r,n,o,a);case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}},t,this)}));return function(e,r,n,i,o,a){return t.apply(this,arguments)}}()},{key:"urlToDataframeTransformer",value:function(){var t=h()(c.a.mark(function t(e,r,n,i,o,a){var u,s,f,h,l,p,y,d,g,m;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=4096,t.next=3,e.arrayBuffer();case 3:if(0!==(s=t.sent).byteLength&&"null"!==e){t.next=6;break}return t.abrupt("return",{empty:!0});case 6:if(f=new v.VectorTile(new x(s)),!(Object.keys(f.layers).length>1)||o){t.next=9;break}throw new Ht("".concat(Xt," LayerID parameter wasn't specified and the MVT tile contains multiple layers: ").concat(JSON.stringify(Object.keys(f.layers)),"."));case 9:if(h=f.layers[o||Object.keys(f.layers)[0]]){t.next=12;break}return t.abrupt("return",{empty:!0});case 12:return l=this._decodeMVTLayer(h,a,u),p=l.geometries,y=l.properties,d=l.numFeatures,g=w(r,n,i),m=this._generateDataFrame(g,p,y,d,a.geomType,a),t.abrupt("return",m);case 16:case"end":return t.stop()}},t,this)}));return function(e,r,n,i,o,a){return t.apply(this,arguments)}}()},{key:"_decodeMVTLayer",value:function(t,e,r){if(!t.length)return{properties:[],geometries:{},numFeatures:0};switch(e.geomType||(e.geomType=this._autoDiscoverType(t)),e.geomType){case ne:var n=new ArrayBuffer(2*t.length*3*4);return this._decode(t,e,r,n);case ie:return this._decode(t,e,r,[],wt);case oe:return this._decode(t,e,r,[],bt);default:throw new Ht("".concat($t," MVT: invalid geometry type '").concat(e.geomType,"'"))}}},{key:"_autoDiscoverType",value:function(t){var e=t.feature(0).type;switch(e){case te:return ne;case ee:return ie;case re:return oe;default:throw new Ht("".concat($t," MVT: invalid geometry type '").concat(e,"'"))}}},{key:"_decode",value:function(t,e,r,n,i){var o,a=0;n&&(o=new Float32Array(n));for(var u=this._initializePropertyArrays(e,t.length),s=u.properties,c=u.propertyNames,f=0;f<t.length;f++){var h=t.feature(f);this._checkType(h,e.geomType);var l=h.loadGeometry();if(i){var p=i(l,r);n.push(p)}else{var y=2*l[0][0].x/r-1,d=2*(1-l[0][0].y/r)-1;if(y<-1||y>=1||d<-1||d>=1)continue;o[6*a+0]=y,o[6*a+1]=d,o[6*a+2]=y,o[6*a+3]=d,o[6*a+4]=y,o[6*a+5]=d}if(void 0===h.properties[e.idProperty])throw new Yt("".concat(Jt.MVT," MVT feature with undefined idProperty '").concat(e.idProperty,"'"));this._decodeProperties(e,c,s,h,a),a++}return{properties:s,geometries:n,numFeatures:a}}},{key:"_checkType",value:function(t,e){var r=t.type,n=ae[r];if(n!==e)throw new Yt("".concat(Jt.MVT," MVT: mixed geometry types in the same layer. Layer has type: ").concat(e," but feature was ").concat(n))}},{key:"_initializePropertyArrays",value:function(t,e){var r=this._getPropertyNamesFrom(t);return{propertyNames:r,properties:this._getPropertiesFor(r,e)}}},{key:"_getPropertyNamesFrom",value:function(t){for(var e=[],r=0;r<t.propertyKeys.length;r++){var n=t.propertyKeys[r];"geometry"!==t.properties[n].type&&e.push.apply(e,u()(t.propertyNames(n)))}return e}},{key:"_getPropertiesFor",value:function(t,e){var r={},n=1024*Math.ceil(e/1024),i=new ArrayBuffer(4*n*t.length);this._propertiesArrayBuffer=i;for(var o=0;o<t.length;o++){r[t[o]]=new Float32Array(i,4*o*n,n)}return r}},{key:"_decodeProperties",value:function(t,e,r,n,i){for(var o=e.length,a=0;a<o;a++){var u=e[a],s=n.properties[u];r[u][i]=this.decodeProperty(t,u,s)}}},{key:"decodeProperty",value:function(t,e,r){var n=t.properties[e].type;if("string"==typeof r){if("category"!==n)throw new Yt("".concat(Jt.MVT," MVT decoding error. Metadata property '").concat(e,"' is of type '").concat(n,"' but the MVT tile contained a feature property of type 'string': '").concat(r,"'"));return t.categorizeString(e,r)}if(null===r||void 0===r||Number.isNaN(r))return Number.MIN_SAFE_INTEGER;if("number"==typeof r){if("number"!==n)throw new Yt("".concat(Jt.MVT," MVT decoding error. Metadata property '").concat(e,"' is of type '").concat(n,"' but the MVT tile contained a feature property of type 'number': '").concat(r,"'"));return r}throw new Yt("".concat(Jt.MVT," MVT decoding error. Feature property value of type '").concat(o()(r),"' cannot be decoded."))}},{key:"_generateDataFrame",value:function(t,e,r,n,i,o){return new Qt({active:!1,center:t.center,geom:e,properties:r,scale:t.scale,size:n,type:i,metadata:o})}}]),t}();var se=new RegExp("^_cdb_agg_[a-zA-Z0-9]+_"),ce={isAggregated:function(t){return t.startsWith("_cdb_agg_")},getBase:function(t){return t.replace(se,"")},getAggFN:function(t){var e=t.substr("_cdb_agg_".length);return e.substr(0,e.indexOf("_"))},aggColumn:function(t,e){return"".concat("_cdb_agg_").concat(e,"_").concat(t)}},fe=function(t){function e(t){var r;return p()(this,e),(r=Gt()(this,Rt()(e).call(this,{message:t}))).name="CartoMapsAPIError",r}return zt()(e,t),e}(Wt),he="[Not supported]:",le=function(t){function e(){return p()(this,e),Gt()(this,Rt()(e).apply(this,arguments))}return zt()(e,t),d()(e,[{key:"decodeProperty",value:function(t,e,r){var n=ce.getBase(e),i=t.properties[n];if(i)switch(i.type){case"date":return function(t,e){var r=new Date;r.setTime(1e3*e);var n=t.min,i=t.max;return(r-n)/(i.getTime()-n.getTime())}(i,r);case"category":return t.categorizeString(n,r);case"number":return r;default:throw new fe("".concat(he," Windshaft MVT decoding error. Feature property value of type '").concat(o()(r),"' cannot be decoded."))}}}]),e}(ue);const pe={MVT:new ue,windshaft:new le};onmessage=function(t){return pe[t.data.workerName].onmessage(t)}}]);