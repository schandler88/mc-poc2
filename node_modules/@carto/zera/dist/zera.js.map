{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 04f88ec460df3c03d49c","webpack:///./lib/index.js","webpack:///./lib/map/index.js","webpack:///./lib/map/google.js","webpack:///./lib/map/leaflet.js","webpack:///./lib/eventEmitter.js","webpack:///./lib/tileLoader.js"],"names":["Map","require","EventEmitter","TileLoader","Interactive","map","gridUrl","_bindMap","_tileLoader","_tileSize","_eventEmitter","tilejson","setUrl","grids","_map","on","_onMapClick","bind","_onMapMouseMove","event","callback","addEventListener","e","eventClone","cloneEvent","coords","_getTileCoordsFromMouseEvent","loadTile","z","x","y","then","tile","_objectForEvent","catch","dispatchEvent","err","pixelPoint","project","_unscale","Math","round","getZoom","tileSize","floor","eventType","point","resolution","max","pow","grid","gridX","gridY","idx","_utfDecode","charCodeAt","key","keys","data","hasOwnProperty","originalEvent","type","_triggerEvent","extendedEvent","clear","off","char","module","exports","GoogleMap","LeafletMap","nativeMap","__gm","_listeners","latLng","getProjection","fromLatLngToPoint","scale","addListener","remove","da","pixel","latlng","wrap","containerPoint","layerPoint","target","click","undefined","move","out","error","_url","_cache","newValue","Promise","resolve","fetch","_buildTileUrl","_handleLimitErrors","url","replace","response","status","json","reject"],"mappings":"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","file":"zera.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"zera\"] = factory();\n\telse\n\t\troot[\"zera\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 04f88ec460df3c03d49c","var Map = require('./map');\nvar EventEmitter = require('./eventEmitter');\nvar TileLoader = require('./tileLoader');\n\n/**\n *\n */\nclass Interactive {\n  constructor (map, gridUrl) {\n    // Map element\n    if (map) {\n      this._bindMap(map);\n    }\n    this._tileLoader = new TileLoader(gridUrl);\n    // We asume 256x256px tiles\n    this._tileSize = 256;\n    // At the moment only one callback is supported so a custom event emitter is used.\n    this._eventEmitter = new EventEmitter();\n  }\n\n  /**\n   * Add the grid url from a tilejson file\n   * @deprecated\n   * Method added for backwards compatibility with wax\n   */\n  tilejson (tilejson) {\n    this._tileLoader.setUrl(tilejson.grids[0]);\n    return this;\n  }\n\n  /**\n   * Add the native map\n   * @deprecated\n   * Method added for backwards compatibility with wax\n   */\n  map (map) {\n    this._bindMap(map);\n    return this;\n  }\n\n  /**\n   * Attach a native map to the interactivity object.\n   * @param {*} map\n   */\n  _bindMap (map) {\n    this._map = new Map(map);\n    this._map.on('click', this._onMapClick.bind(this));\n    this._map.on('mousemove', this._onMapMouseMove.bind(this));\n  }\n\n  /**\n   * Attach event listeners to map events.\n   * @param {on|off|error} event - The name of the event\n   * @param {function} callback - The callback to be executed when the event is fired\n   */\n  on (event, callback) {\n    switch (event) {\n      case 'on':\n        this._eventEmitter.addEventListener('mousemove', callback);\n        this._eventEmitter.addEventListener('click', callback);\n        break;\n      case 'off':\n        this._eventEmitter.addEventListener('featureout', callback);\n        break;\n      case 'error':\n        this._eventEmitter.addEventListener('error', callback);\n        break;\n    }\n    return this;\n  }\n\n  /**\n   * Callback executed when the native map click event is fired\n   * @param {object} e\n   */\n  _onMapClick (e) {\n    var eventClone = this._map.cloneEvent(e);\n    const coords = this._getTileCoordsFromMouseEvent(eventClone);\n    this._tileLoader.loadTile(coords.z, coords.x, coords.y)\n      .then(tile => {\n        if (tile !== 'fetching') {\n          return this._objectForEvent(tile, eventClone, 'click');\n        }\n      })\n      .catch(err => {\n        this._eventEmitter.dispatchEvent('error', err);\n      });\n  }\n\n  /**\n   * Callback executed when the native map \"mousemove\" event is fired.\n   * @param {object} e\n   */\n  _onMapMouseMove (e) {\n    const eventClone = this._map.cloneEvent(e);\n    const coords = this._getTileCoordsFromMouseEvent(eventClone);\n    this._tileLoader.loadTile(coords.z, coords.x, coords.y)\n      .then(tile => {\n        if (tile !== 'fetching') {\n          return this._objectForEvent(tile, eventClone, 'mousemove');\n        }\n      })\n      .catch(err => {\n        this._eventEmitter.dispatchEvent('error', err);\n      });\n  }\n\n  /**\n   * Return the tile coordinates from a mouseEvent\n   * @param {*} mouseEvent\n   */\n  _getTileCoordsFromMouseEvent (event) {\n    const pixelPoint = this._map.project(event);\n    const coords = this._unscale(pixelPoint, this._tileSize);\n    coords.z = Math.round(this._map.getZoom());\n    return coords;\n  }\n\n  /**\n   * Divide each point coord by the tilesize\n   */\n  _unscale (pixelPoint, tileSize) {\n    return {\n      x: Math.floor(pixelPoint.x / tileSize),\n      y: Math.floor(pixelPoint.y / tileSize)\n    };\n  }\n\n  /**\n   * Get the data from a map event.\n   * Using the event coords and the grid.json tile.\n   *\n   * This method fires an event with a `data` property.\n   *\n   * Warning: This method mutates the event object!\n   */\n  _objectForEvent (tile, event, eventType) {\n    const point = this._map.project(event);\n    // 4 pixels asigned to each grid in the utfGrid.\n    const resolution = 4;\n    // get the tile coords to which the pixel belongs\n    let { x, y } = this._unscale(point, this._tileSize);\n    const max = Math.pow(2, this._map.getZoom());\n    x = (x + max) % max;\n    y = (y + max) % max;\n\n    if (tile && tile.grid) {\n      let gridX = Math.floor((point.x - (x * this._tileSize)) / resolution);\n      let gridY = Math.floor((point.y - (y * this._tileSize)) / resolution);\n      let idx = this._utfDecode(tile.grid[gridY].charCodeAt(gridX));\n      let key = tile.keys[idx];\n      if (tile.data.hasOwnProperty(key)) {\n        // Extend the event with the data from the grid json\n        event.data = tile.data[key];\n      }\n    }\n\n    // Add \"e\" property for backwards compatibility with wax.\n    event.e = event.originalEvent || { type: eventType };\n\n    this._triggerEvent(eventType, event);\n  }\n\n  /**\n   * Trigger a wax event.\n   */\n  _triggerEvent (eventType, extendedEvent) {\n    // If there is no data dont do anything!\n    if (!extendedEvent.data) {\n      this._eventEmitter.dispatchEvent('featureout', {});\n      return;\n    }\n    if (eventType === 'mousemove') {\n      this._eventEmitter.dispatchEvent('mousemove', extendedEvent);\n      return;\n    }\n    if (eventType === 'click') {\n      this._eventEmitter.dispatchEvent('featureout', {});\n      this._eventEmitter.dispatchEvent('click', extendedEvent);\n    }\n  }\n\n  /**\n   * Remove interactivity\n   */\n  remove () {\n    this._eventEmitter.clear();\n    // Remove native map listeners\n    this._map.off('click');\n    this._map.off('mousemove');\n  }\n\n  /**\n   * Decode an utf gridjson cell\n   * @see https://github.com/mapbox/utfgrid-spec/blob/master/1.3/utfgrid.md\n   * @param {string} char\n   */\n  _utfDecode (char) {\n    if (char >= 93) {\n      char--;\n    }\n    if (char >= 35) {\n      char--;\n    }\n    return char - 32;\n  }\n}\n\nmodule.exports = { Interactive };\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","var GoogleMap = require('./google');\nvar LeafletMap = require('./leaflet');\n\nfunction Map (nativeMap) {\n  if (nativeMap.__gm) {\n    return new GoogleMap(nativeMap);\n  } else {\n    return new LeafletMap(nativeMap);\n  }\n}\n\nmodule.exports = Map;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/map/index.js","class GoogleMap {\n  constructor (nativeMap) {\n    this._map = nativeMap;\n    this._listeners = {};\n  }\n\n  /**\n   * Return the pixel coordinates of an event at a certain zoom level.\n   */\n  project (event) {\n    const latLng = event.latLng;\n    const point = this._map.getProjection().fromLatLngToPoint(latLng);\n    const scale = Math.pow(2, this.getZoom());\n    return {\n      x: Math.floor(scale * point.x),\n      y: Math.floor(scale * point.y)\n    };\n  }\n\n  getZoom () {\n    return this._map.getZoom();\n  }\n\n  on (event, callback) {\n    this._listeners[event] = this._map.addListener(event, callback);\n  }\n\n  off (event) {\n    this._listeners[event] && this._listeners[event].remove();\n  }\n\n  // We need to clone events to avoid mutations causing buggy behaviour\n  cloneEvent (event) {\n    return {\n      da: event.da,\n      latLng: event.latLng,\n      pixel: event.pixel\n    };\n  }\n}\n\nmodule.exports = GoogleMap;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/map/google.js","class LeafletMap {\n  constructor (nativeMap) {\n    this._map = nativeMap;\n    this._listeners = {};\n  }\n\n  // LatLong to pixel coords\n  project (event) {\n    const latlng = event.latlng.wrap();\n    return this._map.project(latlng, this._map.getZoom()).floor();\n  }\n\n  getZoom () {\n    return this._map.getZoom();\n  }\n\n  on (event, callback) {\n    this._listeners[event] = callback;\n    return this._map.on(event, callback);\n  }\n\n  off (event) {\n    return this._map.off(event, this._listeners[event]);\n  }\n\n  // We need to clone events to avoid mutations causing buggy behaviour\n  cloneEvent (event) {\n    return {\n      containerPoint: event.containerPoint,\n      latlng: event.latlng,\n      layerPoint: event.layerPoint,\n      originalEvent: event.originalEvent,\n      target: event.target,\n      type: event.type\n    };\n  }\n}\n\nmodule.exports = LeafletMap;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/map/leaflet.js","/**\n * Simple event emmiter with one listener per event.\n */\nclass EventEmitter {\n  constructor () {\n    // Callbacks for every event\n    this._listeners = {\n      click: undefined,\n      move: undefined,\n      out: undefined,\n      error: undefined\n    };\n  }\n\n  dispatchEvent (event, data) {\n    switch (event) {\n      case 'mousemove':\n        this._listeners.move && this._listeners.move(data);\n        break;\n      case 'click':\n        this._listeners.click && this._listeners.click(data);\n        break;\n      case 'featureout':\n        this._listeners.out && this._listeners.out();\n        break;\n      case 'error':\n        this._listeners.error && this._listeners.error(data);\n    }\n  }\n\n  addEventListener (event, callback) {\n    switch (event) {\n      case 'mousemove':\n        this._listeners.move = callback;\n        break;\n      case 'click':\n        this._listeners.click = callback;\n        break;\n      case 'featureout':\n        this._listeners.out = callback;\n        break;\n      case 'error':\n        this._listeners.error = callback;\n    }\n  }\n\n  removeEventListener (event) {\n    switch (event) {\n      case 'mousemove':\n        delete this._listeners.move;\n        break;\n      case 'click':\n        delete this._listeners.click;\n        break;\n      case 'featureout':\n        delete this._listeners.out;\n        break;\n      case 'error':\n        delete this._listeners.error;\n    }\n  }\n\n  clear () {\n    this._listeners = {\n      click: undefined,\n      move: undefined,\n      out: undefined,\n      error: undefined\n    };\n  }\n}\n\nmodule.exports = EventEmitter;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/eventEmitter.js","\n/**\n * Load grid.json tiles from a server.\n */\nclass TileLoader {\n  constructor (gridUrl) {\n    this._url = gridUrl;\n    this._cache = {};\n  }\n\n  setUrl (newValue) {\n    this._url = newValue;\n  }\n\n  /**\n   * Load a grid.json tile from the coords using a cache system to improve performance.\n   * @param {number} z\n   * @param {number} x\n   * @param {number} y\n   */\n  loadTile (z, x, y) {\n    // If already cached the request is ignored.\n    if (this._cache[z + '_' + x + '_' + y]) {\n      return Promise.resolve(this._cache[z + '_' + x + '_' + y]);\n    }\n    // Mark the tile as \"fetching\" to prevent duplicated requests. The value will be async obtained.\n    this._cache[z + '_' + x + '_' + y] = 'fetching';\n\n    return fetch(this._buildTileUrl(z, x, y))\n      // On server limit errors reject throw a featureError\n      .then(this._handleLimitErrors)\n      .then(data => {\n        this._cache[z + '_' + x + '_' + y] = data;\n        return data;\n      });\n  }\n\n  /**\n   * Builds the tile url from the coords.\n   * @param {number} z\n   * @param {number} x\n   * @param {number} y\n   */\n  _buildTileUrl (z, x, y) {\n    let url = this._url;\n    url = url.replace(/{z}/, z);\n    url = url.replace(/{x}/, x);\n    url = url.replace(/{y}/, y);\n    return url;\n  }\n\n  /**\n   * When the server returns a 429 we want to throw an especific error.\n   */\n  _handleLimitErrors (response) {\n    if (response.status === 429) {\n      return response.json().then(data => Promise.reject(data));\n    }\n    return response.json();\n  }\n}\n\nmodule.exports = TileLoader;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/tileLoader.js"],"sourceRoot":""}